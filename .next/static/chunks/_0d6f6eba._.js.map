{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdulraheem/Developer/Next/travelclone/components/hero/HeroStatic.tsx"],"sourcesContent":["// components/hero/HeroStatic.tsx\r\n\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport React, { useEffect, useLayoutEffect, useRef } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\ntype Card = {\r\n  id: \"himachal\" | \"bali\" | \"paris\" | \"dubai\";\r\n  img: string;\r\n  video: string;\r\n  alt: string;\r\n  className: string; // absolute position on desktop\r\n  label: string;\r\n};\r\n\r\nconst CARDS: Card[] = [\r\n  { id: \"himachal\", img: \"/hero/himachal.jpg\", video: \"/hero/himachal.mp4\", alt: \"Himachal\", className: \"absolute -left-6 bottom-6 rotate-[-10deg]\", label: \"Himachal\" },\r\n  { id: \"bali\",     img: \"/hero/bali.jpg\",     video: \"/hero/bali.mp4\",     alt: \"Bali\",     className: \"absolute left-1/4 bottom-0 rotate-[5deg]\",    label: \"Bali\" },\r\n  { id: \"paris\",    img: \"/hero/paris.jpg\",    video: \"/hero/paris.mp4\",    alt: \"Paris\",    className: \"absolute right-1/4 bottom-10 rotate-[-4deg]\", label: \"Paris\" },\r\n  { id: \"dubai\",    img: \"/hero/dubai.jpg\",    video: \"/hero/dubai.mp4\",    alt: \"Dubai\",    className: \"absolute -right-6 bottom-4 rotate-[12deg]\",   label: \"Dubai\" },\r\n];\r\n\r\nexport default function HeroStatic() {\r\n  const hostRef = useRef<HTMLDivElement | null>(null);\r\n  const pinRef  = useRef<HTMLElement | null>(null);\r\n\r\n  const thumbRefs = useRef<Record<string, HTMLDivElement | null>>({});\r\n  const videoRefs = useRef<Record<string, HTMLVideoElement | null>>({});\r\n  const labelRefs = useRef<Record<string, HTMLDivElement | null>>({});\r\n  const mobileRefs = useRef<HTMLDivElement[]>([]);\r\n  const mobileVideoRefs = useRef<Record<string, HTMLVideoElement | null>>({});\r\n\r\n  const prefersReduced =\r\n    typeof window !== \"undefined\" &&\r\n    window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\r\n\r\n  useLayoutEffect(() => {\r\n    if (!hostRef.current || !pinRef.current) return;\r\n\r\n    // initial states\r\n    Object.values(thumbRefs.current).forEach(el => {\r\n      if (!el) return;\r\n      gsap.set(el, { y: 160, opacity: 0, scale: 0.95 });\r\n    });\r\n    Object.values(videoRefs.current).forEach(v => {\r\n      if (!v) return;\r\n      // mobile autoplay requirements\r\n      v.muted = true;\r\n      v.autoplay = true;\r\n      v.playsInline = true;\r\n      v.setAttribute(\"muted\", \"\");\r\n      v.setAttribute(\"playsinline\", \"\");\r\n      v.setAttribute(\"webkit-playsinline\", \"\");\r\n      gsap.set(v, { opacity: 0 });\r\n    });\r\n    Object.values(labelRefs.current).forEach(el => el && gsap.set(el, { opacity: 0, y: 12 }));\r\n    mobileRefs.current.forEach(el => el && gsap.set(el, { y: 120, opacity: 0, scale: 0.97 }));\r\n\r\n    // reduced-motion: reveal and play immediately\r\n    if (prefersReduced) {\r\n      Object.values(thumbRefs.current).forEach(el => el && gsap.set(el, { y: 0, opacity: 1, scale: 1 }));\r\n      Object.values(videoRefs.current).forEach(v => {\r\n        if (!v) return;\r\n        gsap.set(v, { opacity: 1 });\r\n        v.play().catch(() => {});\r\n      });\r\n      Object.values(labelRefs.current).forEach(el => el && gsap.set(el, { opacity: 1, y: 0 }));\r\n      mobileRefs.current.forEach(el => el && gsap.set(el, { y: 0, opacity: 1, scale: 1 }));\r\n      // kick mobile videos too\r\n      Object.values(mobileVideoRefs.current).forEach(v => {\r\n        if (!v) return;\r\n        v.muted = true; v.autoplay = true; v.playsInline = true;\r\n        v.setAttribute(\"muted\", \"\"); v.setAttribute(\"playsinline\", \"\"); v.setAttribute(\"webkit-playsinline\", \"\");\r\n        v.play().catch(() => {});\r\n      });\r\n      return;\r\n    }\r\n\r\n    const root  = hostRef.current;\r\n    const pinEl = pinRef.current;\r\n\r\n    // entrance timeline\r\n    const entrance = gsap.timeline({\r\n      defaults: { ease: \"power3.out\" },\r\n      scrollTrigger: {\r\n        trigger: root,\r\n        start: \"top top\",\r\n        end: \"+=140%\",\r\n        scrub: 0.85,\r\n        pin: pinEl,\r\n        anticipatePin: 1,\r\n        invalidateOnRefresh: true,\r\n      },\r\n    });\r\n\r\n    // desktop cards in order\r\n    const inOrder = CARDS.map(c => thumbRefs.current[c.id]).filter(Boolean) as HTMLDivElement[];\r\n    entrance.to(inOrder, {\r\n      y: 0, opacity: 1, scale: 1,\r\n      duration: 1.0,\r\n      stagger: 0.22,\r\n    }, 0.10);\r\n\r\n    // fade in each desktop video and start playback\r\n    inOrder.forEach((el, i) => {\r\n      const id = CARDS[i].id;\r\n      const vid = () => videoRefs.current[id]!;\r\n      const base = 0.10 + i * 0.22;\r\n\r\n      entrance.add(() => {\r\n        const v = vid();\r\n        if (!v) return;\r\n        // make iOS happy\r\n        v.muted = true; v.autoplay = true; v.playsInline = true;\r\n        v.setAttribute(\"muted\", \"\"); v.setAttribute(\"playsinline\", \"\"); v.setAttribute(\"webkit-playsinline\", \"\");\r\n        const p = v.play();\r\n        if (p && typeof (p as any).catch === \"function\") (p as any).catch(() => {});\r\n      }, base + 0.55);\r\n\r\n      entrance.to(vid(), { opacity: 1, duration: 0.6, ease: \"power2.out\" }, base + 0.55);\r\n      entrance.to(labelRefs.current[id], { opacity: 1, y: 0, duration: 0.4, ease: \"power2.out\" }, base + 0.65);\r\n    });\r\n\r\n    // mobile tiles reveal\r\n    if (mobileRefs.current.length) {\r\n      entrance.to(mobileRefs.current, {\r\n        y: 0, opacity: 1, scale: 1,\r\n        duration: 0.9,\r\n        stagger: 0.12,\r\n      }, 0.14);\r\n    }\r\n\r\n    // copy entrance\r\n    gsap.timeline()\r\n      .from(\"[data-anim='headline']\", { y: 20, opacity: 0, duration: 0.7, ease: \"power3.out\" }, 0)\r\n      .from(\"[data-anim='subhead']\",  { y: 16, opacity: 0, duration: 0.6, ease: \"power2.out\" }, 0.1)\r\n      .from(\"[data-anim='cta']\",      { scale: 0.95, opacity: 0, duration: 0.5, ease: \"power2.out\" }, 0.2);\r\n\r\n    return () => {\r\n      gsap.killTweensOf(\"*\");\r\n      ScrollTrigger.getAll().forEach(st => st.kill());\r\n      [...Object.values(videoRefs.current), ...Object.values(mobileVideoRefs.current)].forEach(v => { try { v?.pause(); } catch {} });\r\n    };\r\n  }, [prefersReduced]);\r\n\r\n  // IntersectionObserver to nudge mobile videos to play/pause when visible\r\n  useEffect(() => {\r\n    const vids = Object.values(mobileVideoRefs.current).filter(Boolean) as HTMLVideoElement[];\r\n    if (!vids.length) return;\r\n\r\n    const io = new IntersectionObserver((entries) => {\r\n      entries.forEach(ent => {\r\n        const v = ent.target as HTMLVideoElement;\r\n        if (ent.isIntersecting) {\r\n          // make iOS Safari actually autoplay inline\r\n          v.muted = true; v.autoplay = true; v.playsInline = true;\r\n          v.setAttribute(\"muted\", \"\"); v.setAttribute(\"playsinline\", \"\"); v.setAttribute(\"webkit-playsinline\", \"\");\r\n          v.play().catch(() => {});\r\n        } else {\r\n          try { v.pause(); } catch {}\r\n        }\r\n      });\r\n    }, { threshold: 0.35 });\r\n\r\n    vids.forEach(v => io.observe(v));\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  return (\r\n    <div ref={hostRef} className=\"relative bg-gradient-to-b from-[#101212] to-[#08201D]\">\r\n      <section\r\n        ref={pinRef}\r\n        className=\"relative min-h-[100svh] pt-32 sm:pt-40 lg:pt-48 pb-16 sm:pb-20 lg:pb-28 overflow-hidden\"\r\n        aria-label=\"Hero\"\r\n      >\r\n        {/* Desktop stack */}\r\n        <div className=\"pointer-events-none absolute inset-x-0 bottom-0 z-10 hidden lg:block\">\r\n          <div className=\"relative mx-auto max-w-7xl h-[320px]\">\r\n            {CARDS.map((c) => (\r\n              <div\r\n                key={c.id}\r\n                data-card\r\n                className={c.className}\r\n                ref={(el) => { thumbRefs.current[c.id] = el; }}\r\n              >\r\n                <Frame>\r\n                  {/* Poster underneath */}\r\n                  <Image\r\n                    src={c.img}\r\n                    alt={c.alt}\r\n                    width={520}\r\n                    height={340}\r\n                    className=\"h-full w-full object-cover\"\r\n                    priority\r\n                  />\r\n                  {/* Video fades in and plays */}\r\n                  <video\r\n                    ref={(el) => { videoRefs.current[c.id] = el; }}\r\n                    className=\"pointer-events-none absolute inset-0 h-full w-full object-cover opacity-0\"\r\n                    src={c.video}\r\n                    muted\r\n                    autoPlay\r\n                    playsInline\r\n                    preload=\"metadata\"\r\n                    loop\r\n                    aria-label={`${c.alt} video`}\r\n                  />\r\n                  <div\r\n                    ref={(el) => { labelRefs.current[c.id] = el; }}\r\n                    className=\"pointer-events-none absolute left-3 bottom-3 px-3 py-1.5 rounded-md bg-black/50 ring-1 ring-white/10 text-white text-sm font-semibold opacity-0\"\r\n                  >\r\n                    {c.label}\r\n                  </div>\r\n                </Frame>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile grid with real videos */}\r\n        <div className=\"lg:hidden absolute inset-x-0 bottom-0 z-10 px-4 pb-4\">\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {CARDS.map((c, i) => (\r\n              <div\r\n                key={c.id}\r\n                ref={(el) => { if (el) mobileRefs.current[i] = el; }}\r\n                className=\"rounded-2xl overflow-hidden ring-1 ring-white/10 bg-white/5\"\r\n              >\r\n                <video\r\n                  ref={(el) => { mobileVideoRefs.current[c.id] = el; }}\r\n                  className=\"h-28 w-full object-cover\"\r\n                  src={c.video}\r\n                  poster={c.img}\r\n                  muted\r\n                  autoPlay\r\n                  playsInline\r\n                  preload=\"metadata\"\r\n                  loop\r\n                  aria-label={`${c.alt} video`}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <CopyBlock zClass=\"z-20\" />\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---- bits ---- */\r\n\r\nfunction CopyBlock({ zClass = \"z-20\" }: { zClass?: string }) {\r\n  return (\r\n    <div className={`relative ${zClass} px-4 mx-auto max-w-7xl sm:px-6 lg:px-8`}>\r\n      <div className=\"max-w-4xl mx-auto text-center\">\r\n        <h1 data-anim=\"headline\" className=\"text-4xl font-bold sm:text-6xl lg:text-7xl leading-tight\">\r\n          <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-white to-zinc-300\">\r\n            Plan smart. Travel better.\r\n          </span>\r\n        </h1>\r\n        <p data-anim=\"subhead\" className=\"mt-6 sm:mt-8 text-base text-white/80 sm:text-xl lg:text-2xl leading-relaxed max-w-2xl mx-auto\">\r\n          Tailored trips for Indians and NRIs. Real quotes, secure payments, and human help when you need it.\r\n        </p>\r\n        <a\r\n          data-anim=\"cta\"\r\n          href=\"#trip-builder\"\r\n          className=\"inline-flex items-center px-8 py-4 mt-10 sm:mt-12 lg:mt-16 font-semibold text-white text-lg transition-colors bg-zinc-900 rounded-lg hover:bg-zinc-800 focus:bg-zinc-800\"\r\n        >\r\n          Start Trip Builder\r\n          <svg className=\"w-6 h-6 ml-3 -mr-1\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\r\n            <path stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 9l3 3-3 3M5 12h11\" />\r\n          </svg>\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Frame({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <div className=\"relative h-[220px] w-[360px] rounded-3xl overflow-hidden ring-1 ring-white/10 shadow-2xl shadow-black/40 bg-white/5 backdrop-blur-[0.5px] will-change-transform\">\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;AAGjC;AACA;AACA;AACA;;;AALA;;;;;AAMA,2JAAI,CAAC,cAAc,CAAC,yJAAa;AAWjC,MAAM,QAAgB;IACpB;QAAE,IAAI;QAAY,KAAK;QAAsB,OAAO;QAAsB,KAAK;QAAY,WAAW;QAA6C,OAAO;IAAW;IACrK;QAAE,IAAI;QAAY,KAAK;QAAsB,OAAO;QAAsB,KAAK;QAAY,WAAW;QAA+C,OAAO;IAAO;IACnK;QAAE,IAAI;QAAY,KAAK;QAAsB,OAAO;QAAsB,KAAK;QAAY,WAAW;QAA+C,OAAO;IAAQ;IACpK;QAAE,IAAI;QAAY,KAAK;QAAsB,OAAO;QAAsB,KAAK;QAAY,WAAW;QAA+C,OAAO;IAAQ;CACrK;AAEc,SAAS;;IACtB,MAAM,UAAU,IAAA,uKAAM,EAAwB;IAC9C,MAAM,SAAU,IAAA,uKAAM,EAAqB;IAE3C,MAAM,YAAY,IAAA,uKAAM,EAAwC,CAAC;IACjE,MAAM,YAAY,IAAA,uKAAM,EAA0C,CAAC;IACnE,MAAM,YAAY,IAAA,uKAAM,EAAwC,CAAC;IACjE,MAAM,aAAa,IAAA,uKAAM,EAAmB,EAAE;IAC9C,MAAM,kBAAkB,IAAA,uKAAM,EAA0C,CAAC;IAEzE,MAAM,iBACJ,aAAkB,eAClB,OAAO,UAAU,CAAC,oCAAoC,OAAO;IAE/D,IAAA,gLAAe;sCAAC;YACd,IAAI,CAAC,QAAQ,OAAO,IAAI,CAAC,OAAO,OAAO,EAAE;YAEzC,iBAAiB;YACjB,OAAO,MAAM,CAAC,UAAU,OAAO,EAAE,OAAO;8CAAC,CAAA;oBACvC,IAAI,CAAC,IAAI;oBACT,2JAAI,CAAC,GAAG,CAAC,IAAI;wBAAE,GAAG;wBAAK,SAAS;wBAAG,OAAO;oBAAK;gBACjD;;YACA,OAAO,MAAM,CAAC,UAAU,OAAO,EAAE,OAAO;8CAAC,CAAA;oBACvC,IAAI,CAAC,GAAG;oBACR,+BAA+B;oBAC/B,EAAE,KAAK,GAAG;oBACV,EAAE,QAAQ,GAAG;oBACb,EAAE,WAAW,GAAG;oBAChB,EAAE,YAAY,CAAC,SAAS;oBACxB,EAAE,YAAY,CAAC,eAAe;oBAC9B,EAAE,YAAY,CAAC,sBAAsB;oBACrC,2JAAI,CAAC,GAAG,CAAC,GAAG;wBAAE,SAAS;oBAAE;gBAC3B;;YACA,OAAO,MAAM,CAAC,UAAU,OAAO,EAAE,OAAO;8CAAC,CAAA,KAAM,MAAM,2JAAI,CAAC,GAAG,CAAC,IAAI;wBAAE,SAAS;wBAAG,GAAG;oBAAG;;YACtF,WAAW,OAAO,CAAC,OAAO;8CAAC,CAAA,KAAM,MAAM,2JAAI,CAAC,GAAG,CAAC,IAAI;wBAAE,GAAG;wBAAK,SAAS;wBAAG,OAAO;oBAAK;;YAEtF,8CAA8C;YAC9C,IAAI,gBAAgB;gBAClB,OAAO,MAAM,CAAC,UAAU,OAAO,EAAE,OAAO;kDAAC,CAAA,KAAM,MAAM,2JAAI,CAAC,GAAG,CAAC,IAAI;4BAAE,GAAG;4BAAG,SAAS;4BAAG,OAAO;wBAAE;;gBAC/F,OAAO,MAAM,CAAC,UAAU,OAAO,EAAE,OAAO;kDAAC,CAAA;wBACvC,IAAI,CAAC,GAAG;wBACR,2JAAI,CAAC,GAAG,CAAC,GAAG;4BAAE,SAAS;wBAAE;wBACzB,EAAE,IAAI,GAAG,KAAK;0DAAC,KAAO;;oBACxB;;gBACA,OAAO,MAAM,CAAC,UAAU,OAAO,EAAE,OAAO;kDAAC,CAAA,KAAM,MAAM,2JAAI,CAAC,GAAG,CAAC,IAAI;4BAAE,SAAS;4BAAG,GAAG;wBAAE;;gBACrF,WAAW,OAAO,CAAC,OAAO;kDAAC,CAAA,KAAM,MAAM,2JAAI,CAAC,GAAG,CAAC,IAAI;4BAAE,GAAG;4BAAG,SAAS;4BAAG,OAAO;wBAAE;;gBACjF,yBAAyB;gBACzB,OAAO,MAAM,CAAC,gBAAgB,OAAO,EAAE,OAAO;kDAAC,CAAA;wBAC7C,IAAI,CAAC,GAAG;wBACR,EAAE,KAAK,GAAG;wBAAM,EAAE,QAAQ,GAAG;wBAAM,EAAE,WAAW,GAAG;wBACnD,EAAE,YAAY,CAAC,SAAS;wBAAK,EAAE,YAAY,CAAC,eAAe;wBAAK,EAAE,YAAY,CAAC,sBAAsB;wBACrG,EAAE,IAAI,GAAG,KAAK;0DAAC,KAAO;;oBACxB;;gBACA;YACF;YAEA,MAAM,OAAQ,QAAQ,OAAO;YAC7B,MAAM,QAAQ,OAAO,OAAO;YAE5B,oBAAoB;YACpB,MAAM,WAAW,2JAAI,CAAC,QAAQ,CAAC;gBAC7B,UAAU;oBAAE,MAAM;gBAAa;gBAC/B,eAAe;oBACb,SAAS;oBACT,OAAO;oBACP,KAAK;oBACL,OAAO;oBACP,KAAK;oBACL,eAAe;oBACf,qBAAqB;gBACvB;YACF;YAEA,yBAAyB;YACzB,MAAM,UAAU,MAAM,GAAG;sDAAC,CAAA,IAAK,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC;qDAAE,MAAM,CAAC;YAC/D,SAAS,EAAE,CAAC,SAAS;gBACnB,GAAG;gBAAG,SAAS;gBAAG,OAAO;gBACzB,UAAU;gBACV,SAAS;YACX,GAAG;YAEH,gDAAgD;YAChD,QAAQ,OAAO;8CAAC,CAAC,IAAI;oBACnB,MAAM,KAAK,KAAK,CAAC,EAAE,CAAC,EAAE;oBACtB,MAAM;0DAAM,IAAM,UAAU,OAAO,CAAC,GAAG;;oBACvC,MAAM,OAAO,OAAO,IAAI;oBAExB,SAAS,GAAG;sDAAC;4BACX,MAAM,IAAI;4BACV,IAAI,CAAC,GAAG;4BACR,iBAAiB;4BACjB,EAAE,KAAK,GAAG;4BAAM,EAAE,QAAQ,GAAG;4BAAM,EAAE,WAAW,GAAG;4BACnD,EAAE,YAAY,CAAC,SAAS;4BAAK,EAAE,YAAY,CAAC,eAAe;4BAAK,EAAE,YAAY,CAAC,sBAAsB;4BACrG,MAAM,IAAI,EAAE,IAAI;4BAChB,IAAI,KAAK,OAAO,AAAC,EAAU,KAAK,KAAK,YAAY,AAAC,EAAU,KAAK;8DAAC,KAAO;;wBAC3E;qDAAG,OAAO;oBAEV,SAAS,EAAE,CAAC,OAAO;wBAAE,SAAS;wBAAG,UAAU;wBAAK,MAAM;oBAAa,GAAG,OAAO;oBAC7E,SAAS,EAAE,CAAC,UAAU,OAAO,CAAC,GAAG,EAAE;wBAAE,SAAS;wBAAG,GAAG;wBAAG,UAAU;wBAAK,MAAM;oBAAa,GAAG,OAAO;gBACrG;;YAEA,sBAAsB;YACtB,IAAI,WAAW,OAAO,CAAC,MAAM,EAAE;gBAC7B,SAAS,EAAE,CAAC,WAAW,OAAO,EAAE;oBAC9B,GAAG;oBAAG,SAAS;oBAAG,OAAO;oBACzB,UAAU;oBACV,SAAS;gBACX,GAAG;YACL;YAEA,gBAAgB;YAChB,2JAAI,CAAC,QAAQ,GACV,IAAI,CAAC,0BAA0B;gBAAE,GAAG;gBAAI,SAAS;gBAAG,UAAU;gBAAK,MAAM;YAAa,GAAG,GACzF,IAAI,CAAC,yBAA0B;gBAAE,GAAG;gBAAI,SAAS;gBAAG,UAAU;gBAAK,MAAM;YAAa,GAAG,KACzF,IAAI,CAAC,qBAA0B;gBAAE,OAAO;gBAAM,SAAS;gBAAG,UAAU;gBAAK,MAAM;YAAa,GAAG;YAElG;8CAAO;oBACL,2JAAI,CAAC,YAAY,CAAC;oBAClB,yJAAa,CAAC,MAAM,GAAG,OAAO;sDAAC,CAAA,KAAM,GAAG,IAAI;;oBAC5C;2BAAI,OAAO,MAAM,CAAC,UAAU,OAAO;2BAAM,OAAO,MAAM,CAAC,gBAAgB,OAAO;qBAAE,CAAC,OAAO;sDAAC,CAAA;4BAAO,IAAI;gCAAE,cAAA,wBAAA,EAAG,KAAK;4BAAI,EAAE,UAAM,CAAC;wBAAE;;gBAC/H;;QACF;qCAAG;QAAC;KAAe;IAEnB,yEAAyE;IACzE,IAAA,0KAAS;gCAAC;YACR,MAAM,OAAO,OAAO,MAAM,CAAC,gBAAgB,OAAO,EAAE,MAAM,CAAC;YAC3D,IAAI,CAAC,KAAK,MAAM,EAAE;YAElB,MAAM,KAAK,IAAI;wCAAqB,CAAC;oBACnC,QAAQ,OAAO;gDAAC,CAAA;4BACd,MAAM,IAAI,IAAI,MAAM;4BACpB,IAAI,IAAI,cAAc,EAAE;gCACtB,2CAA2C;gCAC3C,EAAE,KAAK,GAAG;gCAAM,EAAE,QAAQ,GAAG;gCAAM,EAAE,WAAW,GAAG;gCACnD,EAAE,YAAY,CAAC,SAAS;gCAAK,EAAE,YAAY,CAAC,eAAe;gCAAK,EAAE,YAAY,CAAC,sBAAsB;gCACrG,EAAE,IAAI,GAAG,KAAK;4DAAC,KAAO;;4BACxB,OAAO;gCACL,IAAI;oCAAE,EAAE,KAAK;gCAAI,EAAE,UAAM,CAAC;4BAC5B;wBACF;;gBACF;uCAAG;gBAAE,WAAW;YAAK;YAErB,KAAK,OAAO;wCAAC,CAAA,IAAK,GAAG,OAAO,CAAC;;YAC7B;wCAAO,IAAM,GAAG,UAAU;;QAC5B;+BAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,KAAK;QAAS,WAAU;kBAC3B,cAAA,6LAAC;YACC,KAAK;YACL,WAAU;YACV,cAAW;;8BAGX,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,kBACV,6LAAC;gCAEC,WAAS;gCACT,WAAW,EAAE,SAAS;gCACtB,KAAK,CAAC;oCAAS,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG;gCAAI;0CAE7C,cAAA,6LAAC;;sDAEC,6LAAC,2IAAK;4CACJ,KAAK,EAAE,GAAG;4CACV,KAAK,EAAE,GAAG;4CACV,OAAO;4CACP,QAAQ;4CACR,WAAU;4CACV,QAAQ;;;;;;sDAGV,6LAAC;4CACC,KAAK,CAAC;gDAAS,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG;4CAAI;4CAC7C,WAAU;4CACV,KAAK,EAAE,KAAK;4CACZ,KAAK;4CACL,QAAQ;4CACR,WAAW;4CACX,SAAQ;4CACR,IAAI;4CACJ,cAAY,AAAC,GAAQ,OAAN,EAAE,GAAG,EAAC;;;;;;sDAEvB,6LAAC;4CACC,KAAK,CAAC;gDAAS,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG;4CAAI;4CAC7C,WAAU;sDAET,EAAE,KAAK;;;;;;;;;;;;+BA/BP,EAAE,EAAE;;;;;;;;;;;;;;;8BAwCjB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,GAAG,kBACb,6LAAC;gCAEC,KAAK,CAAC;oCAAS,IAAI,IAAI,WAAW,OAAO,CAAC,EAAE,GAAG;gCAAI;gCACnD,WAAU;0CAEV,cAAA,6LAAC;oCACC,KAAK,CAAC;wCAAS,gBAAgB,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG;oCAAI;oCACnD,WAAU;oCACV,KAAK,EAAE,KAAK;oCACZ,QAAQ,EAAE,GAAG;oCACb,KAAK;oCACL,QAAQ;oCACR,WAAW;oCACX,SAAQ;oCACR,IAAI;oCACJ,cAAY,AAAC,GAAQ,OAAN,EAAE,GAAG,EAAC;;;;;;+BAdlB,EAAE,EAAE;;;;;;;;;;;;;;;8BAqBjB,6LAAC;oBAAU,QAAO;;;;;;;;;;;;;;;;;AAI1B;GAnOwB;KAAA;AAqOxB,kBAAkB,GAElB,SAAS,UAAU,KAAwC;QAAxC,EAAE,SAAS,MAAM,EAAuB,GAAxC;IACjB,qBACE,6LAAC;QAAI,WAAW,AAAC,YAAkB,OAAP,QAAO;kBACjC,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,aAAU;oBAAW,WAAU;8BACjC,cAAA,6LAAC;wBAAK,WAAU;kCAAwE;;;;;;;;;;;8BAI1F,6LAAC;oBAAE,aAAU;oBAAU,WAAU;8BAAgG;;;;;;8BAGjI,6LAAC;oBACC,aAAU;oBACV,MAAK;oBACL,WAAU;;wBACX;sCAEC,6LAAC;4BAAI,WAAU;4BAAqB,SAAQ;4BAAY,MAAK;4BAAO,eAAY;sCAC9E,cAAA,6LAAC;gCAAK,QAAO;gCAAe,aAAY;gCAAM,eAAc;gCAAQ,gBAAe;gCAAQ,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzG;MAzBS;AA2BT,SAAS,MAAM,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;IACb,qBACE,6LAAC;QAAI,WAAU;kBACZ;;;;;;AAGP;MANS","debugId":null}},
    {"offset": {"line": 558, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdulraheem/Developer/Next/travelclone/components/sections/carousel.tsx"],"sourcesContent":["// components/sections/Carousel.tsx\r\n\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { gsap } from \"gsap\";\r\n\r\ntype Place = {\r\n  id: string;\r\n  image: string;\r\n  title: string;\r\n  subtitle?: string;\r\n  alt?: string;\r\n};\r\n\r\ntype CarouselProps = {\r\n  id?: string;\r\n  title?: string;\r\n  items: Place[];\r\n  darkOverlay?: number;\r\n  overshootPx?: number;\r\n  whipMs?: number;\r\n  respectReducedMotion?: boolean;\r\n};\r\n\r\nexport default function Carousel({\r\n  id = \"destinations\",\r\n  title = \"Top Picks\",\r\n  items,\r\n  darkOverlay = 0.25,\r\n  overshootPx = 120,\r\n  whipMs = 720,\r\n  respectReducedMotion = true,\r\n}: CarouselProps) {\r\n  const scrollerRef = useRef<HTMLDivElement | null>(null);\r\n  const cardRefs = useRef<Array<HTMLDivElement | null>>([]);\r\n  const centersRef = useRef<number[]>([]);\r\n  const [active, setActive] = useState(0);\r\n  const [gutters, setGutters] = useState({ left: 0, right: 0 });\r\n  const [dramatic, setDramatic] = useState(false);\r\n  const [touchStart, setTouchStart] = useState<number | null>(null);\r\n  const [touchEnd, setTouchEnd] = useState<number | null>(null);\r\n  const [imagesLoaded, setImagesLoaded] = useState<Set<string>>(new Set());\r\n\r\n  // roulette state\r\n  const [isRouletting, setIsRouletting] = useState(false);\r\n  const [rouletteTarget, setRouletteTarget] = useState<number | null>(null);\r\n  const timeoutsRef = useRef<number[]>([]);\r\n\r\n  // Pills (bottom bar)\r\n  const pillsRef = useRef<HTMLDivElement | null>(null);\r\n  const pillBtnRefs = useRef<Array<HTMLButtonElement | null>>([]);\r\n  const [pillsH, setPillsH] = useState(0); // dynamic height of pills bar\r\n\r\n  const pointerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const prefersReduced =\r\n    respectReducedMotion &&\r\n    typeof window !== \"undefined\" &&\r\n    window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\r\n\r\n  const overlay = Math.max(0, Math.min(1, darkOverlay));\r\n\r\n  /* ---------- Measurement ---------- */\r\n  const measureAll = () => {\r\n    const root = scrollerRef.current;\r\n    if (!root) return;\r\n    const cards = cardRefs.current.filter(Boolean) as HTMLDivElement[];\r\n    if (!cards.length) return;\r\n\r\n    // center-first gutter (assumes equal card width)\r\n    const sample = cards[0];\r\n    const viewport = root.clientWidth;\r\n    const cardW = sample.getBoundingClientRect().width;\r\n    const gutter = Math.max(0, Math.round((viewport - cardW) / 2));\r\n    setGutters({ left: gutter, right: gutter });\r\n\r\n    // compute card centers in scroll coordinates after padding applies\r\n    requestAnimationFrame(() => {\r\n      const c: number[] = [];\r\n      for (const el of cards) c.push(el.offsetLeft + el.clientWidth / 2);\r\n      centersRef.current = c;\r\n    });\r\n\r\n    // measure pills height if (wraps on desktop; changes on resize)\r\n    if (pillsRef.current) setPillsH(pillsRef.current.offsetHeight);\r\n  };\r\n\r\n  useEffect(() => {\r\n    measureAll();\r\n    const root = scrollerRef.current;\r\n    if (!root) return;\r\n\r\n    const ro = new ResizeObserver(measureAll);\r\n    ro.observe(root);\r\n\r\n    // observe pills height\r\n    let roPills: ResizeObserver | null = null;\r\n    if (pillsRef.current) {\r\n      roPills = new ResizeObserver(() => {\r\n        if (pillsRef.current) setPillsH(pillsRef.current.offsetHeight);\r\n      });\r\n      roPills.observe(pillsRef.current);\r\n    }\r\n\r\n    return () => {\r\n      ro.disconnect();\r\n      if (roPills) roPills.disconnect();\r\n\r\n      // cleanup any pending roulette timeouts on unmount\r\n      timeoutsRef.current.forEach((id) => clearTimeout(id));\r\n      timeoutsRef.current = [];\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [items.length]);\r\n\r\n  /* ---------- Scroll brain (no per-frame rect reads) ---------- */\r\n  useEffect(() => {\r\n    const root = scrollerRef.current;\r\n    if (!root) return;\r\n\r\n    let ticking = false;\r\n    const onScroll = () => {\r\n      if (ticking) return;\r\n      ticking = true;\r\n\r\n      requestAnimationFrame(() => {\r\n        ticking = false;\r\n        const cards = cardRefs.current.filter(Boolean) as HTMLDivElement[];\r\n        if (!cards.length) return;\r\n        const centers = centersRef.current;\r\n        if (!centers.length) return;\r\n\r\n        const viewCenter = root.scrollLeft + root.clientWidth / 2;\r\n        let bestIdx = active;\r\n        let bestDelta = Number.POSITIVE_INFINITY;\r\n\r\n        const isMobile =\r\n          typeof window !== \"undefined\" && window.innerWidth < 768;\r\n        const baseIntensity = dramatic ? 1.0 : 0.65;\r\n        const blurMax = dramatic\r\n          ? isMobile\r\n            ? 2\r\n            : 3\r\n          : isMobile\r\n          ? 1\r\n          : 1.5;\r\n\r\n        for (let i = 0; i < cards.length; i++) {\r\n          const el = cards[i];\r\n          const delta = centers[i] - viewCenter;\r\n          const d = Math.abs(delta);\r\n          if (d < bestDelta) {\r\n            bestDelta = d;\r\n            bestIdx = i;\r\n          }\r\n\r\n          // Skip applying scroll effects during roulette to let CSS styling work\r\n          if (isRouletting) {\r\n            // Only update the active index during roulette, don't apply visual effects\r\n            continue;\r\n          }\r\n\r\n          const t = Math.max(-1, Math.min(1, delta / (root.clientWidth / 2)));\r\n          const depth = 1 - Math.min(1, Math.abs(t));\r\n          const rot = -t * 18 * baseIntensity;\r\n          const scale = 0.86 + depth * 0.14;\r\n          const opacity = 0.55 + depth * 0.45;\r\n          const blur = Math.max(0, Math.abs(t) * blurMax);\r\n\r\n          el.style.transform = `translateZ(0) perspective(1000px) rotateY(${rot}deg) scale(${scale})`;\r\n          el.style.opacity = `${opacity}`;\r\n\r\n          const img = el.querySelector<HTMLElement>(\"[data-img]\");\r\n          if (img) {\r\n            img.style.filter = `blur(${blur}px) saturate(${\r\n              0.6 + depth * 0.4\r\n            }) brightness(${0.8 + depth * 0.2})`;\r\n          }\r\n        }\r\n\r\n        if (bestIdx !== active) setActive(bestIdx);\r\n      });\r\n    };\r\n\r\n    root.addEventListener(\"scroll\", onScroll, { passive: true });\r\n    onScroll();\r\n    return () => root.removeEventListener(\"scroll\", onScroll);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dramatic, items.length]);\r\n\r\n  /* ---------- Programmatic scroll ---------- */\r\n  const animateScrollTo = (left: number, ms: number) => {\r\n    const root = scrollerRef.current;\r\n    if (!root) return;\r\n\r\n    if (ms <= 0) {\r\n      root.scrollLeft = left;\r\n      return;\r\n    }\r\n\r\n    const start = root.scrollLeft;\r\n    const change = left - start;\r\n    const startTime = performance.now();\r\n    const duration = Math.max(1, ms);\r\n\r\n    const easeInOutCubic = (t: number) =>\r\n      t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\r\n\r\n    const step = (now: number) => {\r\n      const t = Math.min(1, (now - startTime) / duration);\r\n      const node = scrollerRef.current;\r\n      if (!node) return; // stop if unmounted\r\n      node.scrollLeft = start + change * easeInOutCubic(t);\r\n      if (t < 1) requestAnimationFrame(step);\r\n    };\r\n\r\n    requestAnimationFrame(step);\r\n  };\r\n\r\n  const centerIndex = (idx: number, ms = 500) => {\r\n    const root = scrollerRef.current;\r\n    const centers = centersRef.current;\r\n    if (!root || !centers.length) return;\r\n    const clamped = Math.max(0, Math.min(centers.length - 1, idx));\r\n    const targetLeft = centers[clamped] - root.clientWidth / 2;\r\n    animateScrollTo(targetLeft, prefersReduced ? 0 : ms);\r\n  };\r\n\r\n  const centerPill = (i: number) => {\r\n    const bar = pillsRef.current;\r\n    const btn = pillBtnRefs.current[i];\r\n    if (!bar || !btn) return;\r\n    const left = btn.offsetLeft - bar.clientWidth / 2 + btn.clientWidth / 2;\r\n    bar.scrollTo({ left, behavior: prefersReduced ? \"auto\" : \"smooth\" });\r\n  };\r\n\r\n  const whipTo = (idx: number) => {\r\n    const root = scrollerRef.current;\r\n    const centers = centersRef.current;\r\n    if (!root || !centers.length) return;\r\n    const clamped = Math.max(0, Math.min(centers.length - 1, idx));\r\n    const baseLeft = centers[clamped] - root.clientWidth / 2;\r\n    const dir = baseLeft > root.scrollLeft ? 1 : -1;\r\n    const overshoot = prefersReduced ? 0 : overshootPx * dir;\r\n\r\n    setDramatic(true);\r\n    animateScrollTo(baseLeft + overshoot, Math.round(whipMs * 0.6));\r\n    const t1 = window.setTimeout(() => {\r\n      animateScrollTo(baseLeft, Math.round(whipMs * 0.4));\r\n      const t2 = window.setTimeout(\r\n        () => setDramatic(false),\r\n        Math.round(whipMs * 0.45)\r\n      );\r\n      timeoutsRef.current.push(t2);\r\n    }, Math.round(whipMs * 0.6));\r\n    timeoutsRef.current.push(t1);\r\n\r\n    centerPill(clamped);\r\n  };\r\n\r\n  // Touch gesture handlers\r\n  const minSwipeDistance = 50;\r\n  const onTouchStart = (e: React.TouchEvent) => {\r\n    setTouchEnd(null);\r\n    setTouchStart(e.targetTouches[0].clientX);\r\n  };\r\n  const onTouchMove = (e: React.TouchEvent) => {\r\n    setTouchEnd(e.targetTouches[0].clientX);\r\n  };\r\n  const onTouchEnd = () => {\r\n    if (touchStart === null || touchEnd === null || isRouletting) return;\r\n    const distance = touchStart - touchEnd;\r\n    const isLeftSwipe = distance > minSwipeDistance;\r\n    const isRightSwipe = distance < -minSwipeDistance;\r\n\r\n    if (isLeftSwipe) {\r\n      const nextIndex = Math.min(items.length - 1, active + 1);\r\n      rouletteToDestination(nextIndex);\r\n    } else if (isRightSwipe) {\r\n      const prevIndex = Math.max(0, active - 1);\r\n      rouletteToDestination(prevIndex);\r\n    }\r\n  };\r\n\r\n  const handleImageLoad = (imageId: string) => {\r\n    setImagesLoaded((prev) => new Set(prev).add(imageId));\r\n  };\r\n\r\n  const clearRouletteTimers = () => {\r\n    timeoutsRef.current.forEach((id) => clearTimeout(id));\r\n    timeoutsRef.current = [];\r\n  };\r\n\r\n  const rouletteToDestination = (targetIndex: number) => {\r\n    if (isRouletting) return; // Prevent stacking roulettes\r\n    clearRouletteTimers();\r\n\r\n    setIsRouletting(true);\r\n    setRouletteTarget(targetIndex);\r\n\r\n    const root = scrollerRef.current;\r\n    const centers = centersRef.current;\r\n    if (!root || !centers.length || !pointerRef.current) return;\r\n\r\n    // Animate pointer to point right when roulette starts\r\n    gsap.to(pointerRef.current, {\r\n      rotation: 45, // Point to the right during roulette\r\n      duration: 0.5,\r\n      ease: \"power2.out\",\r\n    });\r\n\r\n    const currentIndex = active;\r\n    const totalItems = items.length;\r\n\r\n    // Calculate full circle + target position\r\n    const fullCircle = totalItems;\r\n    const extraRotations = Math.floor(Math.random() * 2) + 1; // 1-2 extra rotations\r\n    const totalSteps =\r\n      fullCircle * extraRotations +\r\n      ((targetIndex - currentIndex + totalItems) % totalItems);\r\n\r\n    let currentStep = 0;\r\n    const baseSpeed = 60;\r\n\r\n    const rouletteStep = () => {\r\n      if (currentStep >= totalSteps) {\r\n        const tFin = window.setTimeout(() => {\r\n          setActive(targetIndex);\r\n          centerIndex(targetIndex, 800);\r\n          centerPill(targetIndex);\r\n\r\n          // Animate pointer back to pointing down with physics bounce\r\n          gsap.to(pointerRef.current, {\r\n            rotation: 0,\r\n            duration: 1.5,\r\n            ease: \"elastic.out(1, 0.3)\",\r\n            delay: 0.2,\r\n          });\r\n\r\n          const tEnd = window.setTimeout(() => {\r\n            setIsRouletting(false);\r\n            setRouletteTarget(null);\r\n          }, 800);\r\n          timeoutsRef.current.push(tEnd);\r\n        }, 300);\r\n        timeoutsRef.current.push(tFin);\r\n        return;\r\n      }\r\n\r\n      const nextIndex = (currentIndex + currentStep + 1) % totalItems;\r\n\r\n      // Enhanced realistic deceleration like real roulette\r\n      const progress = currentStep / totalSteps;\r\n      let delay = baseSpeed;\r\n      if (progress < 0.5) {\r\n        // Fast spinning phase (50% of rotation)\r\n        delay = baseSpeed;\r\n      } else if (progress < 0.7) {\r\n        // Start slowing down (20% of rotation)\r\n        const slowProgress = (progress - 0.5) / 0.2;\r\n        delay = baseSpeed + slowProgress * baseSpeed;\r\n      } else if (progress < 0.85) {\r\n        // Significant slowdown (15% of rotation)\r\n        const slowProgress = (progress - 0.7) / 0.15;\r\n        delay = baseSpeed * 2 + slowProgress * baseSpeed * 2;\r\n      } else if (progress < 0.95) {\r\n        // Major slowdown (10% of rotation)\r\n        const slowProgress = (progress - 0.85) / 0.1;\r\n        delay = baseSpeed * 4 + slowProgress * baseSpeed * 3;\r\n      } else {\r\n        // Final crawl (last 5% - very slow)\r\n        const slowProgress = (progress - 0.95) / 0.05;\r\n        delay = baseSpeed * 7 + slowProgress * baseSpeed * 5;\r\n      }\r\n\r\n      // Add realistic physics variation\r\n      const variation = Math.random() * 0.3 - 0.15; // Â±15% variation\r\n      delay *= 1 + variation;\r\n\r\n      // Realistic pointer physics - wobble left and right with each step\r\n      if (pointerRef.current) {\r\n        const wobbleIntensity = Math.max(0.1, 1 - progress); // Less wobble as it slows\r\n        const wobbleDirection = currentStep % 2 === 0 ? 1 : -1;\r\n        const wobbleAmount = wobbleDirection * wobbleIntensity * 12; // moderate angle\r\n        gsap.to(pointerRef.current, {\r\n          rotation: 45 + wobbleAmount, // Base angle of 45Â°\r\n          duration: Math.min(delay / 1000, 0.3),\r\n          ease: \"power1.out\",\r\n        });\r\n      }\r\n\r\n      setActive(nextIndex);\r\n      centerIndex(nextIndex, Math.min(300, delay * 2));\r\n\r\n      currentStep++;\r\n      const tid = window.setTimeout(rouletteStep, Math.max(80, delay));\r\n      timeoutsRef.current.push(tid);\r\n    };\r\n\r\n    rouletteStep();\r\n  };\r\n\r\n  const onKeyDown: React.KeyboardEventHandler<HTMLDivElement> = (e) => {\r\n    if (isRouletting) return; // block during roulette\r\n    if (e.key === \"ArrowRight\" || e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      rouletteToDestination(Math.min(items.length - 1, active + 1));\r\n    } else if (e.key === \"ArrowLeft\" || e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      rouletteToDestination(Math.max(0, active - 1));\r\n    } else if (e.key === \"Home\") {\r\n      e.preventDefault();\r\n      rouletteToDestination(0);\r\n    } else if (e.key === \"End\") {\r\n      e.preventDefault();\r\n      rouletteToDestination(items.length - 1);\r\n    } else if (e.key >= \"1\" && e.key <= \"9\") {\r\n      e.preventDefault();\r\n      const index = parseInt(e.key) - 1;\r\n      if (index < items.length) rouletteToDestination(index);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    centerPill(active);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [active]);\r\n\r\n  return (\r\n    <section\r\n      id={id}\r\n      aria-label={title}\r\n      className=\"relative w-full h-[100svh] min-h-[100svh] bg-black text-white\"\r\n      style={{ height: \"100svh\" }}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"absolute top-0 inset-x-0 z-10 bg-gradient-to-b from-black/50 via-black/20 to-transparent\">\r\n        <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-4 sm:pt-5 lg:pt-6\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-6xl sm:text-6xl lg:text-6xl font-bold tracking-tight text-white drop-shadow-lg\">\r\n              {title}\r\n            </h2>\r\n            <p\r\n              className=\"text-sm sm:text-base text-white/80 mt-1 drop-shadow-md\"\r\n              aria-live=\"polite\"\r\n            >\r\n              {isRouletting\r\n                ? \"ðŸŽ² Selecting destination...\"\r\n                : \"Discover your next adventure\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Roulette pointer */}\r\n      <div className=\"absolute top-[110px] sm:top-[130px] md:top-[150px] left-1/2 -translate-x-1/2 z-30\">\r\n        <div\r\n          className={`transition-transform duration-300 ${\r\n            isRouletting ? \"scale-110\" : \"scale-100\"\r\n          }`}\r\n        >\r\n          <div className=\"relative flex items-center justify-center\">\r\n            {/* triangle built with borders; color controlled by text-* and border-t-current */}\r\n            <div\r\n              ref={pointerRef}\r\n              className=\"w-0 h-0 drop-shadow-lg text-yellow-400 border-l-[8px] border-r-[8px] border-t-[28px] border-l-transparent border-r-transparent border-t-current\"\r\n              style={{ transformOrigin: \"50% 0%\" }}\r\n            />\r\n            {/* glow */}\r\n            <div className=\"absolute -top-2 left-1/2 -translate-x-1/2 w-8 h-8 rounded-full blur-sm bg-yellow-400/40\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Carousel rail */}\r\n      <div\r\n        ref={scrollerRef}\r\n        className=\"absolute left-4 right-4 sm:left-6 sm:right-6 lg:left-8 lg:right-8 top-[120px] sm:top-[140px] md:top-[160px] overflow-x-auto overflow-y-hidden no-scrollbar overscroll-x-contain snap-x snap-mandatory snap-always flex items-center gap-6 sm:gap-8 focus:outline-none\"\r\n        style={{\r\n          paddingLeft: `${gutters.left}px`,\r\n          paddingRight: `${gutters.right}px`,\r\n          bottom: `${Math.max(64, pillsH + 24)}px`, // small breathing room above pills\r\n        }}\r\n        tabIndex={0}\r\n        onKeyDown={onKeyDown}\r\n        onTouchStart={onTouchStart}\r\n        onTouchMove={onTouchMove}\r\n        onTouchEnd={onTouchEnd}\r\n        aria-roledescription=\"carousel\"\r\n        aria-label={title}\r\n      >\r\n        {items.map((p, i) => (\r\n          <div\r\n            key={p.id}\r\n            ref={(el) => {\r\n              cardRefs.current[i] = el;\r\n            }}\r\n            className=\"relative snap-center shrink-0 transition-transform duration-300 will-change-transform cursor-pointer touch-manipulation\"\r\n            style={{ width: \"clamp(240px, 70vw, 720px)\" }}\r\n            role=\"group\"\r\n            aria-roledescription=\"slide\"\r\n            aria-label={`${p.title} (${i + 1} of ${items.length})`}\r\n          >\r\n            {/* Mobile-optimized aspect ratio - closer to portrait but not exactly 9:16 */}\r\n            <div\r\n              className={`relative aspect-[10/16] md:aspect-[16/9] w-full h-full rounded-3xl overflow-hidden shadow-2xl shadow-black/50 group transition-all duration-500 ${\r\n                i === active\r\n                  ? \"ring-4 ring-white/90 ring-offset-4 ring-offset-black scale-105\"\r\n                  : \"ring-1 ring-white/20\"\r\n              }`}\r\n              style={\r\n                isRouletting && i === active\r\n                  ? {\r\n                      // Force selection styling during roulette\r\n                      transform: \"scale(1.05)\",\r\n                      filter: \"brightness(1.1) saturate(1.1)\",\r\n                      zIndex: 10,\r\n                    }\r\n                  : {}\r\n              }\r\n            >\r\n              {/* Force selection ring during roulette */}\r\n              {isRouletting && i === active && (\r\n                <div className=\"absolute -inset-1 rounded-3xl ring-4 ring-white/90 ring-offset-4 ring-offset-black pointer-events-none\" />\r\n              )}\r\n\r\n              {/* Same radiating highlight for active card whether rouletting or static */}\r\n              {i === active && (\r\n                <>\r\n                  <div className=\"pointer-events-none absolute -inset-2 rounded-3xl bg-[radial-gradient(closest-side,rgba(255,255,255,0.30),rgba(255,255,255,0.10),transparent)] animate-pulse\" />\r\n                  <div\r\n                    className=\"pointer-events-none absolute -inset-4 rounded-3xl bg-[radial-gradient(closest-side,rgba(255,255,255,0.20),rgba(255,255,255,0.05),transparent)] animate-pulse\"\r\n                    style={{ animationDelay: \"0.5s\" }}\r\n                  />\r\n                </>\r\n              )}\r\n\r\n              {/* Loading skeleton */}\r\n              {!imagesLoaded.has(p.id) && (\r\n                <div className=\"absolute inset-0 bg-gradient-to-br from-gray-700 via-gray-800 to-gray-900 animate-pulse\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-pulse\" />\r\n                  <div className=\"absolute bottom-4 left-4 right-4 space-y-2\">\r\n                    <div className=\"h-6 bg-white/20 rounded-lg animate-pulse\" />\r\n                    <div className=\"h-4 bg-white/10 rounded w-2/3 animate-pulse\" />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <Image\r\n                data-img\r\n                src={p.image}\r\n                alt={p.alt || p.title}\r\n                fill\r\n                sizes=\"(min-width: 1024px) 60vw, (min-width: 640px) 70vw, 80vw\"\r\n                className={`object-cover object-center transition-[filter,transform,opacity] duration-500 group-hover:scale-105 ${\r\n                  imagesLoaded.has(p.id) ? \"opacity-100\" : \"opacity-0\"\r\n                }`}\r\n                priority={i === 0}\r\n                onLoad={() => handleImageLoad(p.id)}\r\n              />\r\n\r\n              <div className=\"absolute inset-0 bg-black\" style={{ opacity: overlay }} />\r\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent\" />\r\n              <div className=\"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/30\" />\r\n\r\n              {/* Content overlay */}\r\n              <div className=\"absolute bottom-0 left-0 right-0 p-4 sm:p-6\">\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"text-xl sm:text-3xl font-bold tracking-tight text-white drop-shadow-lg\">\r\n                    {p.title}\r\n                  </div>\r\n\r\n                  {p.subtitle ? (\r\n                    <div className=\"text-sm sm:text-lg text-white/90 drop-shadow-md font-medium\">\r\n                      {p.subtitle}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-sm sm:text-base text-white/75 drop-shadow-md\">\r\n                      Discover amazing destinations\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"pt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                    <button className=\"inline-flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full text-white text-sm font-medium hover:bg-white/30 transition-all duration-200 border border-white/30\">\r\n                      <span>Explore</span>\r\n                      <svg\r\n                        className=\"w-4 h-4\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          strokeWidth={2}\r\n                          d=\"M9 5l7 7-7 7\"\r\n                        />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Enhanced mobile roulette effects */}\r\n              {isRouletting && (\r\n                <>\r\n                  {/* Mobile-specific spinning effect */}\r\n                  <div className=\"md:hidden absolute inset-0 rounded-3xl overflow-hidden pointer-events-none\">\r\n                    <div className=\"absolute inset-0 bg-gradient-radial from-yellow-400/30 via-red-400/20 to-transparent animate-spin\"></div>\r\n                    <div className=\"absolute inset-2 bg-gradient-radial from-transparent via-white/10 to-transparent animate-pulse\"></div>\r\n                  </div>\r\n                  {/* Spinning border effect for mobile */}\r\n                  <div className=\"md:hidden absolute -inset-1 rounded-3xl bg-gradient-to-r from-red-400 via-yellow-400 to-red-400 animate-spin opacity-75\"></div>\r\n                </>\r\n              )}\r\n\r\n              {/* Mobile swipe indicator - only show on first card when not rouletting */}\r\n              {i === 0 && !isRouletting && (\r\n                <div className=\"md:hidden absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1.5 text-xs text-white/90 pointer-events-none border border-white/20 animate-bounce\">\r\n                  Swipe â†’\r\n                </div>\r\n              )}\r\n\r\n              {/* Shimmer for active card */}\r\n              {i === active && !isRouletting && (\r\n                <div className=\"pointer-events-none absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-pulse\" />\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        <div className=\"shrink-0 w-[1px]\" aria-hidden />\r\n      </div>\r\n\r\n      {/* Pills Navigation */}\r\n      <div className=\"absolute bottom-3 inset-x-0 z-20\">\r\n        <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"relative\">\r\n            {/* edge fades on mobile */}\r\n            <div className=\"pointer-events-none md:hidden absolute left-0 top-0 h-full w-8 bg-gradient-to-r from-black via-black/70 to-transparent z-10\" />\r\n            <div className=\"pointer-events-none md:hidden absolute right-0 top-0 h-full w-8 bg-gradient-to-l from-black via-black/70 to-transparent z-10\" />\r\n\r\n            <div\r\n              ref={pillsRef}\r\n              role=\"tablist\"\r\n              aria-label=\"Destinations filter\"\r\n              className=\" flex flex-nowrap items-center gap-2 overflow-x-auto no-scrollbar py-1 snap-x snap-mandatory md:flex-wrap md:overflow-visible md:snap-none md:justify-center \"\r\n            >\r\n              {items.map((p, i) => (\r\n                <button\r\n                  key={p.id}\r\n                  ref={(el) => {\r\n                    pillBtnRefs.current[i] = el;\r\n                  }}\r\n                  onClick={() => rouletteToDestination(i)}\r\n                  role=\"tab\"\r\n                  aria-selected={i === active}\r\n                  aria-controls={`${id}-slide-${i}`}\r\n                  disabled={isRouletting}\r\n                  className={` relative snap-center whitespace-nowrap rounded-full border px-4 py-2 text-sm font-medium transition-all duration-300 backdrop-blur-sm min-w-[80px] text-center hover:scale-105 active:scale-95 touch-manipulation ${\r\n                    isRouletting ? \"opacity-75\" : \"\"\r\n                  } ${\r\n                    i === rouletteTarget && isRouletting\r\n                      ? \"border-yellow-400 text-yellow-300 bg-yellow-400/20 shadow-lg shadow-yellow-400/50 scale-110\"\r\n                      : i === active\r\n                      ? \"border-white/80 text-white bg-white/15 md:bg-white md:text-black md:border-white md:shadow-lg shadow-white/25 scale-105\"\r\n                      : \"border-white/30 text-white/90 hover:bg-white/10 hover:border-white/50 shadow-lg shadow-black/25\"\r\n                  }`}\r\n                >\r\n                  <span className=\"inline-block translate-y-[0.5px] tracking-wide\">\r\n                    {p.title}\r\n                  </span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1399, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdulraheem/Developer/Next/travelclone/components/invoice/InvoiceQuickPay.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\n/* ---------------- Config ---------------- */\r\nconst REF_REGEX = /\\bINV-[A-Z0-9]{5,10}\\b/;\r\nconst FETCH_LATENCY_MS = 650;\r\n\r\ntype Invoice = {\r\n  id: string;\r\n  dateISO: string;\r\n  amount: number;\r\n  currency: string;\r\n  billTo: string;\r\n  status: \"unpaid\" | \"paid\" | \"expired\";\r\n};\r\n\r\nconst MOCK: Record<string, Invoice> = {\r\n  \"INV-AX7Q9K\": {\r\n    id: \"INV-AX7Q9K\",\r\n    dateISO: \"2025-09-18\",\r\n    amount: 2499,\r\n    currency: \"AED\",\r\n    billTo: \"Naeem Ali\",\r\n    status: \"unpaid\",\r\n  },\r\n  \"INV-Z9M2Q1\": {\r\n    id: \"INV-Z9M2Q1\",\r\n    dateISO: \"2025-08-31\",\r\n    amount: 139900,\r\n    currency: \"INR\",\r\n    billTo: \"Leafway Corporate\",\r\n    status: \"unpaid\",\r\n  },\r\n};\r\n\r\nasync function lookupInvoice(ref: string): Promise<Invoice | null> {\r\n  await new Promise((r) => setTimeout(r, FETCH_LATENCY_MS));\r\n  return MOCK[ref] ?? null;\r\n}\r\n\r\nfunction isUserInUAE(): boolean {\r\n  try {\r\n    return Intl.DateTimeFormat().resolvedOptions().timeZone === \"Asia/Dubai\";\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction money(n: number, ccy: string) {\r\n  try {\r\n    return new Intl.NumberFormat(undefined, { style: \"currency\", currency: ccy }).format(n);\r\n  } catch {\r\n    return `${ccy} ${n.toLocaleString()}`;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    Razorpay?: any;\r\n  }\r\n}\r\n\r\n/* ---------- tiny deterministic barcode generator ---------- */\r\ntype Bar =\r\n  | { kind: \"single\"; h: number; gapTop: number }\r\n  | { kind: \"double\"; h1: number; h2: number; innerGap: number; gapTop: number };\r\n\r\nfunction seedFrom(str: string) {\r\n  let h = 2166136261 >>> 0;\r\n  for (let i = 0; i < str.length; i++) h = (h ^ str.charCodeAt(i)) * 16777619;\r\n  return h >>> 0;\r\n}\r\nfunction prng(seed: number) {\r\n  let x = seed >>> 0;\r\n  return () => {\r\n    x = (x * 1664525 + 1013904223) >>> 0;\r\n    return x / 2 ** 32;\r\n  };\r\n}\r\nfunction buildBars(seedStr: string, rows = 12): Bar[] {\r\n  const rnd = prng(seedFrom(seedStr || \"INV-XXXX\"));\r\n  const bars: Bar[] = [];\r\n  for (let i = 0; i < rows; i++) {\r\n    const isDouble = rnd() > 0.55; // some doubles\r\n    const gapTop = 2 + Math.floor(rnd() * 6); // 2â€“7px\r\n    if (isDouble) {\r\n      const h1 = 2 + Math.floor(rnd() * 3); // 2â€“4px\r\n      const h2 = 2 + Math.floor(rnd() * 3);\r\n      const innerGap = 2 + Math.floor(rnd() * 3); // 2â€“4px\r\n      bars.push({ kind: \"double\", h1, h2, innerGap, gapTop });\r\n    } else {\r\n      const h = 3 + Math.floor(rnd() * 4); // 3â€“6px\r\n      bars.push({ kind: \"single\", h, gapTop });\r\n    }\r\n  }\r\n  return bars;\r\n}\r\n\r\n/* ------------- Component --------------- */\r\nexport default function InvoiceQuickPay() {\r\n  const [refInput, setRefInput] = useState(\"\");\r\n  const [status, setStatus] =\r\n    useState<\"idle\" | \"validating\" | \"fetching\" | \"found\" | \"notfound\" | \"error\">(\"idle\");\r\n  const [invoice, setInvoice] = useState<Invoice | null>(null);\r\n  const [drawer, setDrawer] = useState(false);\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n  const [step, setStep] = useState<1 | 2 | 3>(1);\r\n\r\n  const aeUser = useMemo(() => isUserInUAE(), []);\r\n  const reduced = useReducedMotion();\r\n  const inputRef = useRef<HTMLInputElement | null>(null);\r\n  const debouncer = useRef<number | null>(null);\r\n\r\n  /* Prefill from URL or hash */\r\n  useEffect(() => {\r\n    try {\r\n      const sp = new URLSearchParams(location.search);\r\n      const q = sp.get(\"ref\") || location.hash.replace(/^#/, \"\");\r\n      const m = (q || \"\").toUpperCase().match(REF_REGEX);\r\n      if (m) {\r\n        setRefInput(m[0]);\r\n        goFetch(m[0]);\r\n      }\r\n    } catch {}\r\n  }, []);\r\n\r\n  /* Paste anywhere â†’ capture ref */\r\n  useEffect(() => {\r\n    const onPaste = (e: ClipboardEvent) => {\r\n      const t = e.clipboardData?.getData(\"text\") || \"\";\r\n      const m = t.toUpperCase().match(REF_REGEX);\r\n      if (!m) return;\r\n      e.preventDefault();\r\n      setRefInput(m[0]);\r\n      toast(\"Invoice reference detected\");\r\n      goFetch(m[0]);\r\n    };\r\n    document.addEventListener(\"paste\", onPaste);\r\n    return () => document.removeEventListener(\"paste\", onPaste);\r\n  }, []);\r\n\r\n  function toast(t: string) {\r\n    setMsg(t);\r\n    window.setTimeout(() => setMsg(null), 1600);\r\n  }\r\n\r\n  function onChangeRef(raw: string) {\r\n    const up = raw.toUpperCase().replace(/[^A-Z0-9-]/g, \"\");\r\n    let val = up.startsWith(\"INV-\") ? up : \"INV-\" + up.replace(/^INV-?/, \"\").replace(/^INV/, \"\");\r\n    setRefInput(val);\r\n    setStatus(\"validating\");\r\n    setStep(1);\r\n    if (debouncer.current) window.clearTimeout(debouncer.current);\r\n    debouncer.current = window.setTimeout(() => goFetch(val), 300) as unknown as number;\r\n  }\r\n\r\n  async function goFetch(val: string) {\r\n    if (!REF_REGEX.test(val)) {\r\n      setStatus(\"idle\");\r\n      setInvoice(null);\r\n      setStep(1);\r\n      return;\r\n    }\r\n    setStatus(\"fetching\");\r\n    setInvoice(null);\r\n    setStep(2);\r\n    try {\r\n      const data = await lookupInvoice(val);\r\n      if (!data) {\r\n        setStatus(\"notfound\");\r\n        setInvoice(null);\r\n        setStep(1);\r\n        return;\r\n      }\r\n      setInvoice(data);\r\n      setStatus(\"found\");\r\n      setStep(2);\r\n    } catch {\r\n      setStatus(\"error\");\r\n      setStep(1);\r\n    }\r\n  }\r\n\r\n  function openDrawer() {\r\n    if (!invoice) return;\r\n    setDrawer(true);\r\n    setStep(3);\r\n  }\r\n\r\n  function closeDrawer() {\r\n    setDrawer(false);\r\n    setStep(invoice ? 2 : 1);\r\n  }\r\n\r\n  function beginRazorpay() {\r\n    if (!invoice) return;\r\n    if (!aeUser) return toast(\"Payments available in UAE only for now.\");\r\n    if (!window.Razorpay) return toast(\"Razorpay will be wired soon.\");\r\n  }\r\n\r\n  const canPay = invoice && invoice.status === \"unpaid\";\r\n\r\n  // Build a stable pattern for the barcode from the reference or input\r\n  const barcodeBars = useMemo(\r\n    () => buildBars(invoice?.id || refInput || \"INV-XXXX\", 18),\r\n    [invoice?.id, refInput]\r\n  );\r\n\r\n  return (\r\n    <section aria-label=\"Have an invoice\" className=\"relative overflow-x-hidden bg-zinc-950 text-zinc-100\">\r\n      {/* Gentle top vignette */}\r\n      <div\r\n        aria-hidden\r\n        className=\"pointer-events-none absolute inset-0 [background:radial-gradient(900px_380px_at_50%_-10%,rgba(255,255,255,.07)_0%,transparent_60%)]\"\r\n      />\r\n\r\n      <div className=\"relative mx-auto max-w-5xl px-4 md:px-8 py-14 md:py-20\">\r\n        <StepperDark step={step} />\r\n\r\n        <header className=\"text-center\">\r\n          <h2 className=\"text-[32px] md:text-[44px] font-semibold tracking-tight\">Have an Invoice?</h2>\r\n          <p className=\"mt-2 text-zinc-400\">\r\n            Paste or type your reference to review details and continue to payment.\r\n          </p>\r\n        </header>\r\n\r\n        {/* GLOW: wider linear glow behind the card */}\r\n        <div className=\"relative mt-8\">\r\n          <div className=\"absolute inset-x-0 -top-8 -z-10 h-32\">\r\n            <div className=\"glowbar mx-auto h-32 w-[120%] sm:w-[135%]\" />\r\n          </div>\r\n\r\n          {/* Dark â€œticketâ€ card */}\r\n          <div className=\"rounded-3xl border border-white/10 bg-[linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02))] backdrop-blur-md shadow-[0_30px_110px_-30px_rgba(0,0,0,.8)]\">\r\n            <div className=\"grid grid-cols-[112px_1fr]\">\r\n              {/* Left stub */}\r\n              <aside className=\"relative rounded-l-3xl bg-[radial-gradient(120px_60px_at_30%_25%,rgba(255,255,255,.08),transparent_60%),radial-gradient(140px_70px_at_70%_75%,rgba(255,255,255,.08),transparent_60%)] p-4\">\r\n                <div className=\"text-[10px] font-semibold tracking-[0.2em] text-zinc-400\">REF</div>\r\n                <div className=\"mt-2 text-xs text-zinc-200\">{invoice?.id || refInput || \"INV-XXXXX\"}</div>\r\n\r\n                {/* Stacked horizontal-bar barcode */}\r\n                <div\r\n                  className=\"mt-4 mx-auto h-28 w-12 overflow-hidden rounded bg-zinc-900/60 px-1.5 py-2 flex flex-col\"\r\n                  aria-label=\"barcode\"\r\n                >\r\n                  {barcodeBars.map((b, i) =>\r\n                    b.kind === \"single\" ? (\r\n                      <div key={i} style={{ marginTop: b.gapTop }}>\r\n                        <div\r\n                          className=\"w-full rounded-[1px]\"\r\n                          style={{ height: b.h, background: \"rgba(255,255,255,0.88)\" }}\r\n                        />\r\n                      </div>\r\n                    ) : (\r\n                      <div key={i} style={{ marginTop: b.gapTop }}>\r\n                        <div\r\n                          className=\"w-full rounded-[1px]\"\r\n                          style={{ height: b.h1, background: \"rgba(255,255,255,0.88)\" }}\r\n                        />\r\n                        <div style={{ height: b.innerGap }} />\r\n                        <div\r\n                          className=\"w-full rounded-[1px]\"\r\n                          style={{ height: b.h2, background: \"rgba(255,255,255,0.88)\" }}\r\n                        />\r\n                      </div>\r\n                    )\r\n                  )}\r\n                </div>\r\n\r\n                {/* perforation separator */}\r\n                <div className=\"absolute right-0 top-3 bottom-3 w-px bg-zinc-400/40 [mask:repeating-linear-gradient(0deg,#000_0_8px,transparent_8px_16px)]\" />\r\n              </aside>\r\n\r\n              {/* Content */}\r\n              <div className=\"p-5 md:p-7\">\r\n                <div className=\"flex items-start justify-between gap-4\">\r\n                  <div>\r\n                    <div className=\"text-[10px] font-semibold tracking-[0.18em] text-zinc-400\">INVOICE</div>\r\n                    <div className=\"mt-2 flex flex-wrap items-center gap-3 text-sm text-zinc-300\">\r\n                      <Meta label=\"Date\" value={invoice ? fmtDate(invoice.dateISO) : \"â€” â€”\"} />\r\n                      <span className=\"h-3 w-px bg-white/10\" />\r\n                      <Meta label=\"Bill to\" value={invoice?.billTo || \"â€” â€”\"} />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-[11px] text-zinc-400\">Amount</div>\r\n                    <div className=\"mt-1 text-2xl font-semibold tracking-tight text-white\">\r\n                      {invoice ? money(invoice.amount, invoice.currency) : \"â€” â€”\"}\r\n                    </div>\r\n                    <div className=\"mt-2 inline-flex items-center rounded-full border border-white/10 bg-white/5 px-2 py-0.5 text-[10px] text-zinc-300\">\r\n                      {invoice?.status ? capitalize(invoice.status) : \"Preview\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"my-5 h-px bg-zinc-500/50 [mask:repeating-linear-gradient(90deg,#000_0_10px,transparent_10px_18px)]\" />\r\n\r\n                {/* Reference input row */}\r\n                <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:gap-3\">\r\n                  <div className=\"inline-flex items-center gap-2 text-sm text-zinc-400\">\r\n                    Pay using reference\r\n                    <span className=\"rounded-md bg-white/5 px-1.5 py-0.5 font-mono text-[12px] text-zinc-200\">\r\n                      {invoice?.id || refInput || \"INV-XXXXX\"}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"flex-1\" />\r\n\r\n                  <div className=\"flex w-full gap-3 md:w-auto\">\r\n                    <label htmlFor=\"invref\" className=\"sr-only\">\r\n                      Invoice reference\r\n                    </label>\r\n                    <div className=\"relative w-full md:w-80\">\r\n                      <span className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 rounded-full bg-white/10 px-2 py-0.5 text-[10px] text-zinc-300\">\r\n                        INV\r\n                      </span>\r\n                      <input\r\n                        id=\"invref\"\r\n                        ref={inputRef}\r\n                        inputMode=\"text\"\r\n                        autoComplete=\"off\"\r\n                        spellCheck={false}\r\n                        value={refInput}\r\n                        onChange={(e) => onChangeRef(e.target.value)}\r\n                        placeholder=\"INV-AX7Q9K\"\r\n                        className=\"h-10 w-full rounded-full border border-white/10 bg-zinc-900/70 pl-14 pr-4 text-sm tracking-wider text-white placeholder:text-zinc-500 outline-none focus:border-white/30\"\r\n                      />\r\n                    </div>\r\n\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={openDrawer}\r\n                      disabled={!invoice || status !== \"found\"}\r\n                      className=\"h-10 whitespace-nowrap rounded-full bg-white/90 px-4 text-sm font-medium text-zinc-950 shadow-sm transition active:translate-y-px disabled:cursor-not-allowed disabled:opacity-30\"\r\n                    >\r\n                      Review â†’\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* tip + status */}\r\n                {/* <div className=\"mt-3 flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\r\n                  <p className=\"text-[11px] text-zinc-400\">\r\n                    Tip: Paste a reference anywhere. Weâ€™ll detect it automatically.\r\n                  </p>\r\n                  <StatusDark status={status} />\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Drawer */}\r\n            <div\r\n              className={[\r\n                \"overflow-hidden rounded-b-3xl border-t border-white/10 bg-zinc-900/50 backdrop-blur\",\r\n                drawer ? \"max-h-[500px]\" : \"max-h-0\",\r\n                reduced ? \"transition-[max-height] duration-200\" : \"transition-[max-height] duration-400\",\r\n              ].join(\" \")}\r\n              aria-hidden={!drawer}\r\n            >\r\n              <div className=\"p-6 md:p-8\">\r\n                <div className=\"flex items-start justify-between gap-4\">\r\n                  <div>\r\n                    <p className=\"text-xs text-zinc-400\">Paying</p>\r\n                    <p className=\"text-lg font-medium tracking-wide\">\r\n                      {invoice?.id} Â· {invoice ? money(invoice.amount, invoice.currency) : \"\"}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <BadgeDark>Test mode</BadgeDark>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={closeDrawer}\r\n                      className=\"rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs text-zinc-200 hover:bg-white/10\"\r\n                    >\r\n                      Close\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-5 grid gap-4 md:grid-cols-3\">\r\n                  <InfoCardDark\r\n                    title=\"Status\"\r\n                    value={invoice?.status === \"unpaid\" ? \"Unpaid\" : invoice?.status || \"-\"}\r\n                  />\r\n                  <InfoCardDark title=\"Billed to\" value={invoice?.billTo || \"-\"} />\r\n                  <InfoCardDark title=\"Date\" value={invoice ? fmtDate(invoice.dateISO) : \"-\"} />\r\n                </div>\r\n\r\n                <div className=\"mt-6 flex flex-col items-start justify-between gap-4 md:flex-row md:items-center\">\r\n                  <MethodsRowDark />\r\n                  <div className=\"flex gap-3\">\r\n                    {canPay && aeUser ? (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={beginRazorpay}\r\n                        className=\"rounded-full bg-white text-zinc-950 px-5 py-2.5 text-sm font-medium shadow-sm hover:brightness-95\"\r\n                      >\r\n                        Pay with Razorpay\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => toast(aeUser ? \"Invoice not ready.\" : \"Outside UAE: request link.\")}\r\n                        className=\"rounded-full border border-white/10 bg-white/5 px-5 py-2.5 text-sm font-medium text-zinc-200 hover:bg-white/10\"\r\n                      >\r\n                        Request Payment Link\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* toast */}\r\n          <div\r\n            className={[\r\n              \"pointer-events-none fixed left-1/2 top-6 z-50 -translate-x-1/2 rounded-full bg-black/80 px-3 py-1.5 text-xs text-white shadow\",\r\n              msg ? \"opacity-100\" : \"opacity-0\",\r\n              \"transition-opacity duration-200\",\r\n            ].join(\" \")}\r\n            role=\"status\"\r\n            aria-live=\"polite\"\r\n          >\r\n            {msg}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* glow animation (wider, softer) */}\r\n      <style jsx>{`\r\n        .glowbar {\r\n          height: 170px;\r\n          width: 100%;\r\n          filter: blur(32px);\r\n          opacity: 0.95;\r\n          background: linear-gradient(\r\n            90deg,\r\n            rgba(255, 255, 255, 0) 0%,\r\n            rgba(255, 255, 255, 0.22) 18%,\r\n            rgba(255, 255, 255, 0.55) 50%,\r\n            rgba(255, 255, 255, 0.22) 82%,\r\n            rgba(255, 255, 255, 0) 100%\r\n          );\r\n          background-repeat: no-repeat;\r\n          background-size: 320% 100%;\r\n          animation: glow-pan 9s linear infinite;\r\n          mix-blend-mode: screen;\r\n        }\r\n        @keyframes glow-pan {\r\n          0% {\r\n            background-position: -60% 0;\r\n          }\r\n          100% {\r\n            background-position: 160% 0;\r\n          }\r\n        }\r\n        @media (prefers-reduced-motion: reduce) {\r\n          .glowbar {\r\n            animation: none;\r\n            opacity: 0.4;\r\n          }\r\n        }\r\n      `}</style>\r\n    </section>\r\n  );\r\n}\r\n\r\n/* --------- Presentational bits ---------- */\r\nfunction Meta({ label, value }: { label: string; value: string }) {\r\n  return (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      <span className=\"rounded-full bg-white/5 px-2 py-0.5 text-[10px] text-zinc-300\">{label}</span>\r\n      <span className=\"text-sm text-zinc-100\">{value}</span>\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction StatusDark({\r\n  status,\r\n}: {\r\n  status: \"idle\" | \"validating\" | \"fetching\" | \"found\" | \"notfound\" | \"error\";\r\n}) {\r\n  if (status === \"fetching\") {\r\n    return (\r\n      <div className=\"flex items-center gap-2\">\r\n        <div className=\"h-3 w-32 animate-pulse rounded bg-white/10\" />\r\n        <div className=\"h-3 w-16 animate-pulse rounded bg-white/10\" />\r\n      </div>\r\n    );\r\n  }\r\n  if (status === \"notfound\") return <p className=\"text-sm text-rose-400/90\">No invoice with that reference.</p>;\r\n  if (status === \"error\") return <p className=\"text-sm text-rose-400/90\">Something broke. Try again.</p>;\r\n  if (status === \"found\") return <p className=\"text-sm text-emerald-300/90\">Invoice found.</p>;\r\n  return <span aria-hidden className=\"text-sm text-zinc-500\"> </span>;\r\n}\r\n\r\nfunction StepperDark({ step }: { step: 1 | 2 | 3 }) {\r\n  const items = [\r\n    { id: 1, label: \"Reference\" },\r\n    { id: 2, label: \"Review\" },\r\n    { id: 3, label: \"Pay\" },\r\n  ] as const;\r\n  return (\r\n    <div className=\"mx-auto mb-5 flex max-w-md items-center justify-center gap-5 text-xs\">\r\n      {items.map((it, i) => (\r\n        <div key={it.id} className=\"flex items-center gap-1.5\">\r\n          <span\r\n            className={[\r\n              \"grid h-5 w-5 place-items-center rounded-full border text-[10px]\",\r\n              step >= it.id ? \"border-white bg-white text-zinc-900\" : \"border-white/20 bg-white/5 text-zinc-400\",\r\n            ].join(\" \")}\r\n            aria-current={step === it.id ? \"step\" : undefined}\r\n          >\r\n            {it.id}\r\n          </span>\r\n          <span className={step >= it.id ? \"text-zinc-200\" : \"text-zinc-500\"}>{it.label}</span>\r\n          {i < items.length - 1 && <i className=\"mx-1 block h-px w-6 bg-white/15\" />}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BadgeDark({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <span className=\"rounded-full border border-white/10 bg-white/5 px-2 py-0.5 text-[10px] text-zinc-200\">\r\n      {children}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction InfoCardDark({ title, value }: { title: string; value: string }) {\r\n  return (\r\n    <div className=\"rounded-lg border border-white/10 bg-white/5 p-3\">\r\n      <p className=\"text-[11px] text-zinc-400\">{title}</p>\r\n      <p className=\"mt-1 text-sm font-medium text-zinc-100\">{value}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MethodsRowDark() {\r\n  return (\r\n    <div className=\"flex items-center gap-3 text-xs text-zinc-400\">\r\n      <span className=\"text-zinc-500\">Methods:</span>\r\n      <i className=\"inline-flex h-6 w-9 items-center justify-center rounded-md border border-white/10 bg-white/5 text-[10px] text-zinc-200\">\r\n        UPI\r\n      </i>\r\n      <svg width=\"36\" height=\"24\" viewBox=\"0 0 36 24\" className=\"rounded-md border border-white/10 bg-white/5\">\r\n        <rect x=\"1\" y=\"1\" width=\"34\" height=\"22\" rx=\"3\" fill=\"rgba(255,255,255,0.05)\" />\r\n        <rect x=\"6\" y=\"7\" width=\"24\" height=\"10\" rx=\"2\" fill=\"rgba(255,255,255,0.2)\" />\r\n      </svg>\r\n      <i className=\"inline-flex h-6 items-center justify-center rounded-md border border-white/10 bg-white/5 px-2 text-[10px] text-zinc-200\">\r\n        NetBanking\r\n      </i>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------- Utilities --------------- */\r\nfunction useReducedMotion() {\r\n  const [prefers, setPrefers] = useState(false);\r\n  useEffect(() => {\r\n    const m = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\r\n    const update = () => setPrefers(m.matches);\r\n    update();\r\n    m.addEventListener?.(\"change\", update);\r\n    return () => m.removeEventListener?.(\"change\", update);\r\n  }, []);\r\n  return prefers;\r\n}\r\n\r\nfunction fmtDate(iso: string) {\r\n  try {\r\n    const d = new Date(iso + \"T00:00:00Z\");\r\n    return new Intl.DateTimeFormat(undefined, { year: \"numeric\", month: \"short\", day: \"2-digit\" }).format(d);\r\n  } catch {\r\n    return iso;\r\n  }\r\n}\r\n\r\nfunction capitalize(s: string) {\r\n  return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2509, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdulraheem/Developer/Next/travelclone/components/how-it-works/DigitalDockingDivs.tsx"],"sourcesContent":["// components/how-it-works/DigitalDockingDivs.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useLayoutEffect, useMemo, useRef } from \"react\";\r\nimport { gsap } from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\n\r\nif (typeof window !== \"undefined\") {\r\n  gsap.registerPlugin(ScrollTrigger);\r\n}\r\n\r\ntype Step = {\r\n  id: string;\r\n  title: string;\r\n  body: string;\r\n  href?: string;\r\n};\r\n\r\ntype DigitalDockingDivsProps = {\r\n  steps?: Step[];\r\n  /** number of tiny pips on each band's rails */\r\n  pipCount?: number;\r\n  /** subtle side glow sweep */\r\n  glowEnabled?: boolean;\r\n  /** moving highlight sweep across the band */\r\n  sweepEnabled?: boolean;\r\n  /** 3D tilt on hover (desktop only) */\r\n  hoverTilt?: boolean;\r\n  /** snap scroll to each step boundary */\r\n  snap?: boolean;\r\n  /** optional section title override */\r\n  heading?: string;\r\n};\r\n\r\nconst DEFAULT_STEPS: Step[] = [\r\n  { id: \"plan\",    title: \"Plan Precisely\",   body: \"Share goals, constraints, and rough dates. We map feasibility in 24â€“48h.\" },\r\n  { id: \"curate\",  title: \"Curate Fast\",      body: \"Handpicked hotels, flights, and visa guidance matched to your constraints.\" },\r\n  { id: \"quote\",   title: \"Quote Clearly\",    body: \"Crystal pricing. No mystery fees. You approve, we lock inventory.\" },\r\n  { id: \"invoice\", title: \"Invoice Simply\",   body: \"You get an invoice ref. Pay by reference; we reconcile instantly.\" },\r\n  { id: \"depart\",  title: \"Travel Confident\", body: \"Final confirmations, WhatsApp support, and live changes if needed.\" },\r\n];\r\n\r\n/** tiny util to build stable ref arrays */\r\nfunction makeRefArray<T>(n: number) {\r\n  const arr = Array<T | null>(n).fill(null);\r\n  const setAt = (i: number) => (el: T | null) => {\r\n    arr[i] = el;\r\n  };\r\n  return [arr, setAt] as const;\r\n}\r\n\r\nexport default function DigitalDockingDivs({\r\n  steps = DEFAULT_STEPS,\r\n  pipCount = 18,\r\n  glowEnabled = true,\r\n  sweepEnabled = true,\r\n  hoverTilt = true,\r\n  snap = true,\r\n  heading = \"How It Works\",\r\n}: DigitalDockingDivsProps) {\r\n  const sectionRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // refs per-step\r\n  const [shellRefs, setShell]   = makeRefArray<HTMLLIElement>(steps.length);\r\n  const [bandRefs, setBand]     = makeRefArray<HTMLDivElement>(steps.length);\r\n  const [fillRefs, setFill]     = makeRefArray<HTMLDivElement>(steps.length);\r\n  const [sweepRefs, setSweep]   = makeRefArray<HTMLDivElement>(steps.length);\r\n  const [beaconRefs, setBeacon] = makeRefArray<HTMLDivElement>(steps.length);\r\n  const [glowRefs, setGlow]     = makeRefArray<HTMLDivElement>(steps.length);\r\n  const [badgeRefs, setBadge]   = makeRefArray<HTMLSpanElement>(steps.length);\r\n  const [textRefs, setText]     = makeRefArray<HTMLDivElement>(steps.length);\r\n\r\n  // runtime guardrails\r\n  const reduced = useMemo(() => {\r\n    if (typeof window === \"undefined\") return false;\r\n    return window.matchMedia?.(\"(prefers-reduced-motion: reduce)\")?.matches ?? false;\r\n  }, []);\r\n\r\n  const lowPower = useMemo(() => {\r\n    if (typeof window === \"undefined\") return false;\r\n    const tiny = window.matchMedia?.(\"(max-width: 640px)\")?.matches ?? false;\r\n    const highDPR = typeof window.devicePixelRatio === \"number\" && window.devicePixelRatio > 2;\r\n    const bodyFlag = document.documentElement.dataset.lowfx === \"1\";\r\n    return tiny || highDPR || bodyFlag;\r\n  }, []);\r\n\r\n  const sweepOn = sweepEnabled && !reduced && !lowPower;\r\n  const glowOn  = glowEnabled && !reduced && !lowPower;\r\n  const tiltOn  = hoverTilt && !reduced && !lowPower;\r\n\r\n  const pipCountEffective = Math.max(8, Math.round(pipCount * (lowPower ? 0.6 : 1)));\r\n\r\n  useLayoutEffect(() => {\r\n    if (!sectionRef.current) return;\r\n\r\n    const ctx = gsap.context(() => {\r\n      // Make all elements visible immediately (static appearance)\r\n      gsap.set(bandRefs, { opacity: 1, y: 0 });\r\n      gsap.set(fillRefs, { width: 0, opacity: 0.7 });\r\n      gsap.set(beaconRefs, { opacity: 1 });\r\n      \r\n      // Hide sweep and glow initially\r\n      gsap.set(sweepRefs, { opacity: 0 });\r\n      if (!glowOn) gsap.set(glowRefs, { opacity: 0 });\r\n\r\n      // Create a single scroll-based animation for the entire section\r\n      const masterTL = gsap.timeline({\r\n        scrollTrigger: {\r\n          trigger: sectionRef.current,\r\n          start: \"top bottom\",\r\n          end: \"bottom top\",\r\n          scrub: 1, // smooth scrubbing\r\n          onUpdate: self => {\r\n            const progress = self.progress;\r\n            \r\n            // Update each step based on global progress\r\n            bandRefs.forEach((band, i) => {\r\n              if (!band) return;\r\n              \r\n              const fill = fillRefs[i];\r\n              const sweep = sweepRefs[i];\r\n              const beacon = beaconRefs[i];\r\n              const glow = glowRefs[i];\r\n              \r\n              // Determine if this step should be illuminated\r\n              const stepStart = i / steps.length;\r\n              const stepEnd = (i + 1) / steps.length;\r\n              const stepProgress = Math.max(0, Math.min(1, (progress - stepStart) / (stepEnd - stepStart)));\r\n              \r\n              // Animate fill based on step progress\r\n              if (fill) {\r\n                gsap.set(fill, { \r\n                  width: `${stepProgress * 100}%`,\r\n                  opacity: stepProgress > 0 ? 0.7 : 0.3\r\n                });\r\n              }\r\n              \r\n              // Animate beacon position\r\n              if (beacon) {\r\n                gsap.set(beacon, {\r\n                  left: `${stepProgress * 100}%`,\r\n                  opacity: stepProgress > 0.1 ? 1 : 0.3,\r\n                  scale: stepProgress > 0.1 ? 1 : 0.8\r\n                });\r\n              }\r\n              \r\n              // Animate sweep highlight\r\n              if (sweep && sweepOn && stepProgress > 0) {\r\n                gsap.set(sweep, {\r\n                  xPercent: stepProgress * 120 - 20,\r\n                  opacity: stepProgress > 0.1 ? 0.4 : 0\r\n                });\r\n              }\r\n              \r\n              // Animate glow\r\n              if (glow && glowOn && stepProgress > 0) {\r\n                gsap.set(glow, {\r\n                  xPercent: stepProgress * 150 - 50,\r\n                  opacity: stepProgress > 0.1 ? 0.6 : 0\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      // Optional desktop tilt\r\n      if (tiltOn && window.matchMedia(\"(hover: hover)\").matches) {\r\n        bandRefs.forEach((band) => {\r\n          if (!band) return;\r\n          \r\n          let rect = band.getBoundingClientRect();\r\n          const ro = new ResizeObserver(() => {\r\n            rect = band.getBoundingClientRect();\r\n          });\r\n          ro.observe(band);\r\n\r\n          const onEnter = () => (rect = band.getBoundingClientRect());\r\n          const onMove = (e: PointerEvent) => {\r\n            const cx = rect.left + rect.width / 2;\r\n            const cy = rect.top + rect.height / 2;\r\n            const dx = (e.clientX - cx) / (rect.width / 2);\r\n            const dy = (e.clientY - cy) / (rect.height / 2);\r\n            band.style.setProperty(\"--rx\", `${-(dy * 2)}deg`);\r\n            band.style.setProperty(\"--ry\", `${dx * 3}deg`);\r\n          };\r\n          const onLeave = () => {\r\n            band.style.setProperty(\"--rx\", \"0deg\");\r\n            band.style.setProperty(\"--ry\", \"0deg\");\r\n          };\r\n          \r\n          band.addEventListener(\"pointerenter\", onEnter, { passive: true });\r\n          band.addEventListener(\"pointermove\", onMove, { passive: true });\r\n          band.addEventListener(\"pointerleave\", onLeave, { passive: true });\r\n\r\n          // cleanup on unmount\r\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n          (band as any).__cleanupTilt = () => {\r\n            ro.disconnect();\r\n            band.removeEventListener(\"pointerenter\", onEnter);\r\n            band.removeEventListener(\"pointermove\", onMove);\r\n            band.removeEventListener(\"pointerleave\", onLeave);\r\n          };\r\n        });\r\n      }\r\n\r\n      // Section-level snapping to each step (keep if desired)\r\n      if (snap) {\r\n        let stops: number[] = [];\r\n        const computeStops = () => {\r\n          const sec = sectionRef.current!;\r\n          const secTop = sec.getBoundingClientRect().top + window.scrollY;\r\n          const total = Math.max(1, sec.scrollHeight - window.innerHeight);\r\n          stops = shellRefs.map((li) => {\r\n            if (!li) return 0;\r\n            const top = li.getBoundingClientRect().top + window.scrollY;\r\n            const p = (top - secTop) / total;\r\n            return Math.min(1, Math.max(0, p));\r\n          });\r\n        };\r\n        computeStops();\r\n        const snapST = ScrollTrigger.create({\r\n          id: \"runway-snap\",\r\n          trigger: sectionRef.current!,\r\n          start: \"top top\",\r\n          end: () => `+=${Math.max(1, sectionRef.current!.scrollHeight - window.innerHeight)}`,\r\n          snap: {\r\n            snapTo: (value) => (stops.length ? gsap.utils.snap(stops, value) : value),\r\n            duration: 0.3,\r\n            ease: \"power1.inOut\",\r\n          },\r\n          onRefreshInit: computeStops,\r\n          onRefresh: computeStops,\r\n        });\r\n\r\n        // cleanup snap\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (sectionRef.current as any).__cleanupSnap = () => snapST.kill();\r\n      }\r\n    }, sectionRef);\r\n\r\n    return () => {\r\n      // cleanup tilt listeners\r\n      bandRefs.forEach((el) => {\r\n        if (!el) return;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (el as any).__cleanupTilt?.();\r\n      });\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      (sectionRef.current as any)?.__cleanupSnap?.();\r\n      ctx.revert();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [steps.length, sweepOn, glowOn, tiltOn, snap, reduced]);\r\n\r\n  // simple pip renderer\r\n  const renderPips = (prefix: string) =>\r\n    Array.from({ length: pipCountEffective }).map((_, i) => (\r\n      <div\r\n        key={`${prefix}${i}`}\r\n        className=\"h-[1.5px] w-2 sm:h-[2px] sm:w-3 rounded-full bg-white/60 opacity-20\"\r\n      />\r\n    ));\r\n\r\n  return (\r\n    <section\r\n      ref={sectionRef}\r\n      aria-labelledby=\"howitworks-heading\"\r\n      className=\"relative isolate overflow-x-hidden bg-zinc-950 text-zinc-100\"\r\n    >\r\n      {/* soft backdrop + glow bar */}\r\n      <div\r\n        aria-hidden\r\n        className=\"pointer-events-none absolute inset-0 [background:radial-gradient(1200px_520px_at_18%_-10%,rgba(255,255,255,0.09)_0%,transparent_60%)]\"\r\n      />\r\n      <div className=\"absolute inset-x-0 top-8 sm:top-12 -z-10 h-16 sm:h-24 overflow-hidden\">\r\n        <div className=\"glowbar mx-auto h-16 sm:h-24 w-[130%]\" />\r\n      </div>\r\n\r\n      <div className=\"mx-auto max-w-[980px] px-3 sm:px-4 lg:px-5 pt-10 sm:pt-14 lg:pt-16 pb-12 sm:pb-16 lg:pb-20\">\r\n        <header className=\"mb-6 sm:mb-7 lg:mb-9 text-center\">\r\n          <h2\r\n            id=\"howitworks-heading\"\r\n            className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold tracking-tight\"\r\n          >\r\n            {heading}\r\n          </h2>\r\n          <p className=\"mt-2 text-xs sm:text-sm lg:text-base text-zinc-400 max-w-2xl mx-auto\">\r\n            Five phases. The runway lights guide you from left to right.\r\n          </p>\r\n        </header>\r\n\r\n        <ol className=\"space-y-4 sm:space-y-6 lg:space-y-7\">\r\n          {steps.map((s: Step, i: number) => (\r\n            <li\r\n              key={s.id}\r\n              ref={setShell(i)}\r\n              className=\"relative min-h-[72px] sm:min-h-[88px] lg:min-h-[96px]\"\r\n            >\r\n              <div\r\n                ref={setBand(i)}\r\n                className={[\r\n                  \"absolute inset-0 group rounded-xl sm:rounded-2xl lg:rounded-[26px] border border-white/10\",\r\n                  \"bg-zinc-900/40 px-3 sm:px-4 lg:px-5 py-3 sm:py-3.5 lg:py-4.5\",\r\n                  \"transition-transform duration-200 will-change-transform [contain:layout_paint_style]\",\r\n                  \"[transform:rotateX(var(--rx,0deg))_rotateY(var(--ry,0deg))] [transform-style:preserve-3d]\",\r\n                  lowPower ? \"\" : \"backdrop-blur\",\r\n                  \"shadow-[inset_0_0_0_1px_rgba(255,255,255,0.05),inset_0_1px_0_rgba(255,255,255,0.05),inset_0_-1px_0_rgba(0,0,0,0.45)]\",\r\n                ].join(\" \")}\r\n              >\r\n                {/* dotted runway texture */}\r\n                <div\r\n                  aria-hidden\r\n                  className=\"pointer-events-none absolute inset-0 rounded-xl sm:rounded-2xl lg:rounded-[26px] opacity-[.14]\"\r\n                  style={{\r\n                    backgroundImage:\r\n                      \"radial-gradient(circle at 14px 50%, rgba(255,255,255,.18) 2px, transparent 2px)\",\r\n                    backgroundSize: \"40px 12px sm:60px 18px\",\r\n                    backgroundPosition: \"0 50%\",\r\n                  }}\r\n                />\r\n\r\n                {/* top and bottom pips - hidden on mobile */}\r\n                <div className=\"absolute inset-x-2 sm:inset-x-3 top-1.5 sm:top-2 hidden md:flex items-center justify-between gap-1\">\r\n                  {renderPips(\"t\")}\r\n                </div>\r\n                <div className=\"absolute inset-x-2 sm:inset-x-3 bottom-1.5 sm:bottom-2 hidden md:flex items-center justify-between gap-1\">\r\n                  {renderPips(\"b\")}\r\n                </div>\r\n\r\n                {/* progress fill */}\r\n                <div\r\n                  ref={setFill(i)}\r\n                  className=\"absolute inset-y-0 left-0 w-0 will-change-[transform,opacity,width] [transform:translateZ(0)]\"\r\n                  style={{\r\n                    background:\r\n                      \"linear-gradient(90deg, rgba(255,255,255,0.13) 0%, rgba(255,255,255,0.08) 60%, rgba(255,255,255,0.00) 100%)\",\r\n                  }}\r\n                />\r\n\r\n                {/* side glow sweep */}\r\n                {glowOn && (\r\n                  <div\r\n                    ref={setGlow(i)}\r\n                    aria-hidden\r\n                    className=\"pointer-events-none absolute inset-y-0 -left-1/3 w-1/3 will-change-transform [transform:translateZ(0)]\"\r\n                    style={{\r\n                      background:\r\n                        \"linear-gradient(90deg, transparent, rgba(185,190,255,0.9), transparent)\",\r\n                      filter: \"blur(12px)\",\r\n                      opacity: 0.6,\r\n                    }}\r\n                  />\r\n                )}\r\n\r\n                {/* moving highlight */}\r\n                {sweepOn && (\r\n                  <div\r\n                    ref={setSweep(i)}\r\n                    className=\"pointer-events-none absolute top-0 h-full w-16 sm:w-24 lg:w-36 opacity-0 will-change-[transform,opacity] [transform:translateZ(0)]\"\r\n                    style={{\r\n                      left: \"-10%\",\r\n                      background:\r\n                        \"radial-gradient(60%_100% at 50% 50%, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.10) 45%, rgba(255,255,255,0.0) 70%)\",\r\n                      mixBlendMode: \"screen\",\r\n                    }}\r\n                  />\r\n                )}\r\n\r\n                {/* beacon dot */}\r\n                <div\r\n                  ref={setBeacon(i)}\r\n                  className=\"absolute top-1/2 h-2.5 w-2.5 sm:h-3 sm:w-3 lg:h-3.5 lg:w-3.5 -translate-y-1/2 rounded-full bg-white\"\r\n                  style={{\r\n                    left: \"-6px\",\r\n                    boxShadow:\r\n                      \"0 0 10px rgba(255,245,230,.55), 0 0 28px rgba(255,200,150,.25)\",\r\n                  }}\r\n                />\r\n\r\n                {/* content grid */}\r\n                <div\r\n                  className=\"relative grid items-center gap-x-2 sm:gap-x-3 lg:gap-x-6\"\r\n                  style={{ gridTemplateColumns: \"var(--col-spec)\" }}\r\n                >\r\n                  <span\r\n                    ref={setBadge(i)}\r\n                    className=\"inline-flex h-6 sm:h-7 lg:h-8 items-center justify-center rounded-lg border border-white/15 bg-white/10 px-1.5 sm:px-2 text-[9px] sm:text-[10px] lg:text-[11px] font-semibold tracking-wide text-white\"\r\n                  >\r\n                    STEP {i + 1}\r\n                  </span>\r\n\r\n                  <div className=\"leading-tight text-white\">\r\n                    <h3 className=\"text-sm sm:text-[16px] md:text-[18px] lg:text-[20px] font-semibold\">\r\n                      {s.title}\r\n                    </h3>\r\n                  </div>\r\n\r\n                  <div ref={setText(i)} className=\"text-xs sm:text-[14px] lg:text-[15px] text-zinc-300\">\r\n                    {s.body}\r\n                    {s.href ? (\r\n                      <a\r\n                        href={s.href}\r\n                        className=\"ml-2 inline-flex items-center text-[11px] sm:text-[13px] text-zinc-200 underline decoration-zinc-500/60 underline-offset-2 hover:text-white\"\r\n                      >\r\n                        Learn more â†’\r\n                      </a>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      </div>\r\n\r\n      {/* responsive column spec */}\r\n      <style jsx>{`\r\n        :global(section[aria-labelledby=\"howitworks-heading\"]) {\r\n          --col-spec: 60px minmax(120px, 180px) 1fr;\r\n        }\r\n        @media (min-width: 640px) {\r\n          :global(section[aria-labelledby=\"howitworks-heading\"]) {\r\n            --col-spec: 74px minmax(150px, 220px) 1fr;\r\n          }\r\n        }\r\n        @media (min-width: 1024px) {\r\n          :global(section[aria-labelledby=\"howitworks-heading\"]) {\r\n            --col-spec: 86px minmax(170px, 240px) 1fr;\r\n          }\r\n        }\r\n        @media (min-width: 1280px) {\r\n          :global(section[aria-labelledby=\"howitworks-heading\"]) {\r\n            --col-spec: 92px minmax(190px, 280px) 1fr;\r\n          }\r\n        }\r\n      `}</style>\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3074, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdulraheem/Developer/Next/travelclone/components/smart-faq/SmartFAQ.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\n\r\n/* --------------------------------------------------------------------------\r\n * Smart FAQ â€” two-pane layout\r\n * - Sticky left \"Dock\": search, chips, utilities\r\n * - Right \"Results\": Best Answer hero + accordion list\r\n * - Dark, glassy, subtle grid texture, accent edge; no animated bg\r\n * - URL sync with { scroll:false }, keyboard nav, JSON-LD\r\n * -------------------------------------------------------------------------- */\r\n\r\nexport type FAQItem = {\r\n  id: string;\r\n  question: string;\r\n  answer: string;\r\n  tags: string[];\r\n  synonyms?: string[];\r\n  cta?: { label: string; href: string };\r\n  related?: string[];\r\n};\r\n\r\nconst FAQS: FAQItem[] = [\r\n  {\r\n    id: \"quotation-flow\",\r\n    question: \"How does the booking/quotation flow work?\",\r\n    answer:\r\n      \"You submit your trip details; our team calls to refine the plan; we send a formal quotation with an invoice reference.\",\r\n    tags: [\"booking\", \"quotes\"],\r\n    synonyms: [\"how do i book\", \"pricing process\", \"get a quote\", \"quotation process\"],\r\n  },\r\n  {\r\n    id: \"what-is-trip-builder-lite\",\r\n    question: \"What is Trip Builder Lite?\",\r\n    answer:\r\n      \"A guided, one-question-at-a-time flow inspired by Typeform. It collects your route, dates, travellers, preferences and hands the request to our team.\",\r\n    tags: [\"trip builder\"],\r\n    synonyms: [\"smart trip form\", \"builder\", \"typeform flow\"],\r\n    cta: { label: \"Start Trip Builder\", href: \"#trip-builder\" },\r\n  },\r\n  {\r\n    id: \"pay-invoice\",\r\n    question: \"How do I pay an invoice?\",\r\n    answer:\r\n      \"Use the Have an Invoice section and enter your reference number. Youâ€™ll be redirected to our payment gateway.\",\r\n    tags: [\"payments\", \"invoices\"],\r\n    synonyms: [\"pay bill\", \"payment link\", \"settle invoice\"],\r\n    cta: { label: \"Pay invoice\", href: \"#invoice-pay\" },\r\n  },\r\n];\r\n\r\n/* ---------------- helpers ---------------- */\r\nconst norm = (s: string) => s.toLowerCase().normalize(\"NFKD\");\r\nconst tokenize = (s: string) =>\r\n  norm(s)\r\n    .replace(/[^a-z0-9\\s]/g, \" \")\r\n    .split(/\\s+/)\r\n    .filter(Boolean);\r\n\r\nfunction editDistance(a: string, b: string) {\r\n  a = norm(a);\r\n  b = norm(b);\r\n  const m = a.length, n = b.length;\r\n  if (!m) return n;\r\n  if (!n) return m;\r\n  const dp = Array.from({ length: m + 1 }, () => new Array(n + 1).fill(0));\r\n  for (let i = 0; i <= m; i++) dp[i][0] = i;\r\n  for (let j = 0; j <= n; j++) dp[0][j] = j;\r\n  for (let i = 1; i <= m; i++) {\r\n    for (let j = 1; j <= n; j++) {\r\n      const cost = a[i - 1] === b[j - 1] ? 0 : 1;\r\n      dp[i][j] = Math.min(dp[i - 1][j] + 1, dp[i][j - 1] + 1, dp[i - 1][j - 1] + cost);\r\n    }\r\n  }\r\n  return dp[m][n];\r\n}\r\n\r\nfunction scoreItem(q: string, item: FAQItem) {\r\n  if (!q.trim()) return 0.0001;\r\n  const qn = norm(q);\r\n  const qTokens = tokenize(q);\r\n  const title = norm(item.question);\r\n  const ans = norm(item.answer);\r\n  const tags = item.tags.map(norm);\r\n  const syns = (item.synonyms || []).map(norm);\r\n  let score = 0;\r\n\r\n  if (title.includes(qn)) score += 18;\r\n  if (ans.includes(qn)) score += 6;\r\n\r\n  for (const qt of qTokens) {\r\n    if (qt.length < 2) continue;\r\n    if (title.split(/\\s+/).includes(qt)) score += 10;\r\n    if (title.includes(qt)) score += 6;\r\n    if (tags.some(t => t.includes(qt))) score += 7;\r\n    if (syns.some(s => s.includes(qt))) score += 6;\r\n    if (ans.includes(qt)) score += 3;\r\n\r\n    const cands = [...title.split(/\\s+/), ...syns.flatMap(s => s.split(/\\s+/)), ...tags];\r\n    let best = Infinity;\r\n    for (const c of cands) best = Math.min(best, editDistance(qt, c));\r\n    if (best <= 1 && qt.length >= 4) score += 5;\r\n    else if (best === 2 && qt.length >= 5) score += 3;\r\n  }\r\n  score += Math.min(item.answer.length, 200) / 200;\r\n  return score;\r\n}\r\n\r\nfunction clsx(...xs: Array<string | false | null | undefined>) {\r\n  return xs.filter(Boolean).join(\" \");\r\n}\r\n\r\n/* ---------------- component ---------------- */\r\nexport default function SmartFAQ() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  const allTags = useMemo(() => {\r\n    const s = new Set<string>();\r\n    FAQS.forEach(f => f.tags.forEach(t => s.add(t)));\r\n    return Array.from(s).sort();\r\n  }, []);\r\n\r\n  const [query, setQuery] = useState(\"\");\r\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\r\n  const [expanded, setExpanded] = useState<Set<string>>(new Set());\r\n  const [activeIndex, setActiveIndex] = useState(-1);\r\n\r\n  const searchRef = useRef<HTMLInputElement>(null);\r\n  const lastToggledId = useRef<string | null>(null);\r\n\r\n  /* Parse URL once */\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const sp = new URLSearchParams(window.location.search);\r\n    const q = sp.get(\"q\") || \"\";\r\n    const t = (sp.get(\"tags\") || \"\").split(\",\").filter(Boolean);\r\n    const ex = new Set((sp.get(\"expanded\") || \"\").split(\",\").filter(Boolean));\r\n    setQuery(q);\r\n    setSelectedTags(t);\r\n    setExpanded(ex);\r\n\r\n    const hash = window.location.hash.replace(/^#\\/?/, \"\");\r\n    if (hash.startsWith(\"faq/\")) {\r\n      const id = hash.slice(4);\r\n      if (id) setExpanded(prev => new Set(prev).add(id));\r\n    }\r\n  }, []);\r\n\r\n  /* Sync URL AFTER render, without scrolling to top */\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const sp = new URLSearchParams();\r\n    if (query) sp.set(\"q\", query);\r\n    if (selectedTags.length) sp.set(\"tags\", selectedTags.join(\",\"));\r\n    if (expanded.size) sp.set(\"expanded\", Array.from(expanded).join(\",\"));\r\n    router.replace(`${pathname}?${sp.toString()}`, { scroll: false });\r\n  }, [query, selectedTags, expanded, router, pathname]);\r\n\r\n  /* Deep-link hash update after commit, no scroll jump */\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const id = lastToggledId.current;\r\n    if (!id) return;\r\n    const open = expanded.has(id);\r\n    const sp = new URLSearchParams(window.location.search);\r\n    const url = `${pathname}?${sp.toString()}${open ? `#faq/${id}` : \"\"}`;\r\n    history.replaceState(null, \"\", url);\r\n  }, [expanded, pathname]);\r\n\r\n  // Mutators â€” no router calls here\r\n  const toggleTag = useCallback((t: string) => {\r\n    setSelectedTags(prev => (prev.includes(t) ? prev.filter(x => x !== t) : [...prev, t]));\r\n  }, []);\r\n\r\n  const removeTag = useCallback((t: string) => {\r\n    setSelectedTags(prev => prev.filter(x => x !== t));\r\n  }, []);\r\n\r\n  const clearAll = useCallback(() => {\r\n    setQuery(\"\");\r\n    setSelectedTags([]);\r\n    setExpanded(new Set());\r\n    setActiveIndex(-1);\r\n    searchRef.current?.focus();\r\n  }, []);\r\n\r\n  const setAllExpanded = useCallback((open: boolean, ids: string[]) => {\r\n    setExpanded(new Set<string>(open ? ids : []));\r\n  }, []);\r\n\r\n  const toggleExpand = useCallback((id: string) => {\r\n    setExpanded(prev => {\r\n      const next = new Set(prev);\r\n      next.has(id) ? next.delete(id) : next.add(id);\r\n      lastToggledId.current = id;\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  /* Search + ranking */\r\n  const ranked = useMemo(() => {\r\n    const byTags = selectedTags.length\r\n      ? FAQS.filter(f => selectedTags.every(t => f.tags.includes(t)))\r\n      : FAQS;\r\n\r\n    const withScores = byTags.map(f => ({ item: f, score: scoreItem(query, f) }));\r\n    withScores.sort((a, b) => b.score - a.score || a.item.question.localeCompare(b.item.question));\r\n\r\n    const best = withScores[0];\r\n    const second = withScores[1];\r\n    const bestAnswerId =\r\n      best &&\r\n      ((second ? best.score - second.score > 10 : best.score > 18) || norm(best.item.question) === norm(query))\r\n        ? best.item.id\r\n        : null;\r\n\r\n    return { bestAnswerId, results: withScores.map(x => x.item) };\r\n  }, [query, selectedTags]);\r\n\r\n  const visibleIds = useMemo(() => ranked.results.map(r => r.id), [ranked.results]);\r\n\r\n  /* Keyboard nav */\r\n  useEffect(() => {\r\n    function onKey(e: KeyboardEvent) {\r\n      const target = e.target as HTMLElement | null;\r\n      const isTyping =\r\n        target &&\r\n        (target.tagName === \"INPUT\" ||\r\n          target.tagName === \"TEXTAREA\" ||\r\n          target.getAttribute(\"contenteditable\") === \"true\");\r\n\r\n      if (e.key === \"/\" && !isTyping) {\r\n        e.preventDefault();\r\n        searchRef.current?.focus();\r\n        return;\r\n      }\r\n      if (e.key === \"Escape\") {\r\n        clearAll();\r\n        return;\r\n      }\r\n      if (e.key === \"ArrowDown\" || e.key === \"ArrowUp\") {\r\n        e.preventDefault();\r\n        setActiveIndex(prev => {\r\n          const max = ranked.results.length - 1;\r\n          if (max < 0) return -1;\r\n          const next = e.key === \"ArrowDown\" ? Math.min(max, prev + 1) : Math.max(0, prev - 1);\r\n          const id = ranked.results[next]?.id;\r\n          document.getElementById(`faq-item-${id}`)?.scrollIntoView({ block: \"nearest\" });\r\n          return next;\r\n        });\r\n        return;\r\n      }\r\n      if (e.key === \"Enter\" && activeIndex >= 0) {\r\n        e.preventDefault();\r\n        const id = ranked.results[activeIndex]?.id;\r\n        if (id) toggleExpand(id);\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [ranked.results, activeIndex, toggleExpand, clearAll]);\r\n\r\n  /* JSON-LD */\r\n  const jsonLd = useMemo(() => {\r\n    const mainEntity = ranked.results.slice(0, 6).map(f => ({\r\n      \"@type\": \"Question\",\r\n      name: f.question,\r\n      acceptedAnswer: { \"@type\": \"Answer\", text: f.answer },\r\n    }));\r\n    return { \"@context\": \"https://schema.org\", \"@type\": \"FAQPage\", mainEntity } as const;\r\n  }, [ranked.results]);\r\n\r\n  return (\r\n    <section className=\"relative w-full bg-transparent text-white/90\">\r\n      <div className=\"relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-14 sm:py-18\">\r\n        <header className=\"mb-8 sm:mb-10\">\r\n          <p className=\"text-xs tracking-[0.25em] text-white/50 uppercase\">Answers, on tap</p>\r\n          <h2 className=\"mt-2 text-4xl sm:text-5xl font-semibold tracking-tight text-white\">Smart FAQ</h2>\r\n          <p className=\"mt-3 text-sm sm:text-base text-white/70\">\r\n            Search, filter, deep link. Press <kbd className=\"px-1 py-0.5 rounded bg-white/10 text-white/80\">/</kbd> to focus search.\r\n          </p>\r\n        </header>\r\n\r\n        {/* Two-pane layout */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-5\">\r\n          {/* Dock (left) */}\r\n          <aside\r\n            className=\"lg:col-span-4\"\r\n            aria-label=\"FAQ filters and tools\"\r\n          >\r\n            <div className=\"dockPanel sticky top-[calc(var(--header-h,72px)+16px)]\">\r\n              <div className=\"panel accentEdge rounded-2xl overflow-hidden\">\r\n                {/* Search */}\r\n                <div className=\"border-b border-white/10 p-3 sm:p-4\">\r\n                  <label htmlFor=\"faq-search\" className=\"sr-only\">\r\n                    Search questions\r\n                  </label>\r\n                  <div className=\"flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2.5\">\r\n                    <div className=\"i-lucide-search h-4 w-4 opacity-60\" aria-hidden />\r\n                    <input\r\n                      id=\"faq-search\"\r\n                      ref={searchRef}\r\n                      value={query}\r\n                      onChange={e => setQuery(e.target.value)}\r\n                      placeholder=\"Search questions...\"\r\n                      className=\"w-full bg-transparent outline-none placeholder-white/40 text-sm sm:text-base\"\r\n                    />\r\n                    <kbd className=\"hidden sm:block text-[11px] px-1.5 py-0.5 rounded bg-white/10 text-white/70\">/</kbd>\r\n                  </div>\r\n\r\n                  {/* Active filters */}\r\n                  {(selectedTags.length > 0 || query) && (\r\n                    <div className=\"mt-3 flex flex-wrap gap-2\">\r\n                      {query && (\r\n                        <span className=\"inline-flex items-center gap-2 rounded-full bg-white/10 border border-white/10 px-3 py-1.5 text-xs\">\r\n                          <span className=\"text-white/70\">Query:</span>\r\n                          <span className=\"text-white\">{query}</span>\r\n                          <button\r\n                            type=\"button\"\r\n                            className=\"opacity-70 hover:opacity-100\"\r\n                            aria-label=\"Clear search\"\r\n                            onClick={() => setQuery(\"\")}\r\n                          >\r\n                            Ã—\r\n                          </button>\r\n                        </span>\r\n                      )}\r\n                      {selectedTags.map(t => (\r\n                        <span\r\n                          key={`sel-${t}`}\r\n                          className=\"inline-flex items-center gap-2 rounded-full bg-white/10 border border-white/10 px-3 py-1.5 text-xs\"\r\n                        >\r\n                          <span className=\"text-white\">{t}</span>\r\n                          <button\r\n                            type=\"button\"\r\n                            className=\"opacity-70 hover:opacity-100\"\r\n                            aria-label={`Remove ${t}`}\r\n                            onClick={() => removeTag(t)}\r\n                          >\r\n                            Ã—\r\n                          </button>\r\n                        </span>\r\n                      ))}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={clearAll}\r\n                        className=\"ml-auto text-xs rounded-md px-2.5 py-1.5 bg-white/10 hover:bg-white/15 border border-white/10\"\r\n                      >\r\n                        Reset\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Tags */}\r\n                <div className=\"p-3 sm:p-4\">\r\n                  <div className=\"mb-2 text-[11px] uppercase tracking-[0.16em] text-white/50\">Filter by tags</div>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {allTags.map(t => {\r\n                      const on = selectedTags.includes(t);\r\n                      return (\r\n                        <button\r\n                          key={t}\r\n                          type=\"button\"\r\n                          onClick={() => toggleTag(t)}\r\n                          className={clsx(\r\n                            \"shrink-0 text-xs sm:text-sm rounded-full px-3 py-1.5 border transition\",\r\n                            on ? \"bg-white text-black border-white\" : \"bg-white/5 text-white/80 border-white/10 hover:bg-white/10\"\r\n                          )}\r\n                          aria-pressed={on}\r\n                        >\r\n                          {t.charAt(0).toUpperCase() + t.slice(1)}\r\n                        </button>\r\n                      );\r\n                    })}\r\n                  </div>\r\n\r\n                  {/* Utilities */}\r\n                  <div className=\"mt-4 flex items-center gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setAllExpanded(true, visibleIds)}\r\n                      className=\"text-xs rounded-md px-2.5 py-1.5 bg-white/10 hover:bg-white/15 border border-white/10\"\r\n                    >\r\n                      Expand all\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setAllExpanded(false, visibleIds)}\r\n                      className=\"text-xs rounded-md px-2.5 py-1.5 bg-white/10 hover:bg-white/15 border border-white/10\"\r\n                    >\r\n                      Collapse all\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Count card */}\r\n              <div className=\"mt-4 panel rounded-xl px-4 py-3 text-sm text-white/70\">\r\n                <span className=\"text-white\">{ranked.results.length}</span> result\r\n                {ranked.results.length === 1 ? \"\" : \"s\"} found\r\n              </div>\r\n            </div>\r\n          </aside>\r\n\r\n          {/* Results (right) */}\r\n          <main className=\"lg:col-span-8\">\r\n            {/* Best Answer hero */}\r\n            {ranked.bestAnswerId && (\r\n              <BestAnswerHero\r\n                item={FAQS.find(f => f.id === ranked.bestAnswerId)!}\r\n                onToggle={() => toggleExpand(ranked.bestAnswerId!)}\r\n                expanded={expanded.has(ranked.bestAnswerId)}\r\n              />\r\n            )}\r\n\r\n            {/* List */}\r\n            <div className=\"space-y-3\">\r\n              {ranked.results.map((f, i) => (\r\n                <FAQRow\r\n                  key={f.id}\r\n                  index={i}\r\n                  item={f}\r\n                  active={i === activeIndex}\r\n                  expanded={expanded.has(f.id)}\r\n                  onToggle={() => toggleExpand(f.id)}\r\n                />\r\n              ))}\r\n\r\n              {ranked.results.length === 0 && (\r\n                <EmptyState onReset={clearAll} />\r\n              )}\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n\r\n      {/* JSON-LD */}\r\n      <script\r\n        type=\"application/ld+json\"\r\n        suppressHydrationWarning\r\n        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\r\n      />\r\n\r\n      {/* Panels + accent edge + subtle grid texture */}\r\n      <style jsx>{`\r\n        .dockPanel { /* wrapper so sticky looks good on tall pages */ }\r\n\r\n        .panel {\r\n          position: relative;\r\n          border: 1px solid rgba(255, 255, 255, 0.10);\r\n          background:\r\n            linear-gradient(to bottom right, rgba(255,255,255,0.06), rgba(255,255,255,0.03)) border-box;\r\n          backdrop-filter: blur(14px);\r\n          box-shadow:\r\n            inset 0 1px 0 rgba(255,255,255,0.06),\r\n            0 8px 30px rgba(0,0,0,0.35);\r\n        }\r\n        /* subtle grid texture */\r\n        .panel::after {\r\n          content: \"\";\r\n          position: absolute;\r\n          inset: 0;\r\n          border-radius: inherit;\r\n          background-image:\r\n            linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),\r\n            linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);\r\n          background-size: 24px 24px;\r\n          pointer-events: none;\r\n          mask: linear-gradient(#000, #000);\r\n        }\r\n        /* accent edge on the left side */\r\n        .accentEdge {\r\n          overflow: hidden;\r\n        }\r\n        .accentEdge::before {\r\n          content: \"\";\r\n          position: absolute;\r\n          inset: 0 0 0 auto;\r\n          width: 4px;\r\n          border-radius: 999px;\r\n          background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.12));\r\n          opacity: 0.6;\r\n        }\r\n        @media (prefers-color-scheme: light) {\r\n          .panel { border-color: rgba(0,0,0,0.10); }\r\n          .panel::after {\r\n            background-image:\r\n              linear-gradient(to right, rgba(0,0,0,0.04) 1px, transparent 1px),\r\n              linear-gradient(to bottom, rgba(0,0,0,0.04) 1px, transparent 1px);\r\n          }\r\n          .accentEdge::before { opacity: 0.5; }\r\n        }\r\n      `}</style>\r\n    </section>\r\n  );\r\n}\r\n\r\n/* ---------- subviews ---------- */\r\n\r\nfunction BestAnswerHero({\r\n  item,\r\n  onToggle,\r\n  expanded,\r\n}: {\r\n  item: FAQItem;\r\n  onToggle: () => void;\r\n  expanded: boolean;\r\n}) {\r\n  return (\r\n    <article className=\"mb-4 rounded-2xl overflow-hidden panel\">\r\n      <div className=\"relative p-4 sm:p-5\">\r\n        {/* ribbon */}\r\n        <div className=\"mb-3 inline-flex items-center gap-2 rounded-full border border-amber-300/30 bg-amber-300/15 px-3 py-1\">\r\n          <span className=\"h-1.5 w-1.5 rounded-full bg-amber-300/80\" />\r\n          <span className=\"text-xs tracking-wide text-amber-100/90 uppercase\">Best answer</span>\r\n        </div>\r\n\r\n        <div className=\"flex items-start justify-between gap-3\">\r\n          <h3 className=\"text-lg sm:text-xl font-semibold text-white\">{item.question}</h3>\r\n          <button\r\n            type=\"button\"\r\n            className=\"text-xs rounded-md px-2.5 py-1.5 bg-amber-200/20 hover:bg-amber-200/30 border border-amber-200/30\"\r\n            onClick={onToggle}\r\n            aria-expanded={expanded}\r\n          >\r\n            {expanded ? \"Hide\" : \"Show\"}\r\n          </button>\r\n        </div>\r\n\r\n        <div\r\n          className={clsx(\r\n            \"grid transition-[grid-template-rows,opacity] duration-150 ease-out\",\r\n            expanded ? \"grid-rows-[1fr] opacity-100\" : \"grid-rows-[0fr] opacity-80\"\r\n          )}\r\n        >\r\n          <div className=\"overflow-hidden\">\r\n            <p className=\"mt-2 text-sm sm:text-[15px] leading-6 text-white/80\">{item.answer}</p>\r\n            <div className=\"mt-3\">\r\n              {item.cta && (\r\n                <a\r\n                  href={item.cta.href}\r\n                  className=\"inline-flex items-center gap-2 rounded-lg border border-white/15 bg-white/10 px-3 py-1.5 text-sm hover:bg-white/15\"\r\n                >\r\n                  {item.cta.label}\r\n                </a>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nfunction FAQRow({\r\n  item,\r\n  expanded,\r\n  onToggle,\r\n  active,\r\n  index,\r\n  compact = false,\r\n  showBadge = true,\r\n}: {\r\n  item: FAQItem;\r\n  expanded: boolean;\r\n  onToggle: () => void;\r\n  active?: boolean;\r\n  index: number;\r\n  compact?: boolean;\r\n  showBadge?: boolean;\r\n}) {\r\n  const id = `faq-item-${item.id}`;\r\n  const rowBg = index % 2 === 0 ? \"bg-white/[0.045]\" : \"bg-white/[0.065]\";\r\n\r\n  const onRelatedClick = (rid: string) => (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    const el = document.getElementById(`faq-item-${rid}`);\r\n    if (el) el.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n  };\r\n\r\n  return (\r\n    <article\r\n      id={id}\r\n      data-faq-row\r\n      className={clsx(\r\n        \"rounded-2xl border border-white/10 panel\",\r\n        rowBg,\r\n        active && \"ring-2 ring-white/30\"\r\n      )}\r\n    >\r\n      <header className=\"px-3 sm:px-4 py-3\">\r\n        {showBadge && (\r\n          <div className=\"mb-2 flex items-center gap-2 text-[10px] sm:text-xs uppercase tracking-[0.15em] text-white/50\">\r\n            {item.tags.map(t => (\r\n              <span key={t} className=\"inline-flex items-center gap-1.5\">\r\n                <span className=\"inline-block h-1.5 w-1.5 rounded-full bg-white/40\" />\r\n                {t}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          type=\"button\"\r\n          onClick={onToggle}\r\n          aria-expanded={expanded}\r\n          aria-controls={`${id}-panel`}\r\n          className=\"group w-full flex items-start justify-between gap-3 text-left\"\r\n        >\r\n          <h3 className={clsx(\"text-base sm:text-lg font-semibold text-white\", compact && \"text-base\")}>\r\n            {item.question}\r\n          </h3>\r\n          <span\r\n            className={clsx(\r\n              \"mt-0.5 inline-flex h-7 w-7 items-center justify-center rounded-lg border border-white/10 bg-white/5 text-white/70 transition-transform\",\r\n              expanded ? \"rotate-180\" : \"rotate-0\"\r\n            )}\r\n            aria-hidden\r\n          >\r\n            â–¾\r\n          </span>\r\n        </button>\r\n\r\n        <div\r\n          id={`${id}-panel`}\r\n          className={clsx(\r\n            \"grid transition-[grid-template-rows,opacity] duration-150 ease-out\",\r\n            expanded ? \"grid-rows-[1fr] opacity-100\" : \"grid-rows-[0fr] opacity-70\"\r\n          )}\r\n        >\r\n          <div className=\"overflow-hidden\">\r\n            <p className=\"mt-2 text-sm sm:text-[15px] leading-6 text-white/75\">{item.answer}</p>\r\n\r\n            <div className=\"mt-3 flex flex-wrap items-center gap-3\">\r\n              {item.cta && (\r\n                <a\r\n                  href={item.cta.href}\r\n                  className=\"inline-flex items-center gap-2 rounded-lg border border-white/15 bg-white/10 px-3 py-1.5 text-sm hover:bg-white/15\"\r\n                >\r\n                  {item.cta.label}\r\n                </a>\r\n              )}\r\n              {item.related && item.related.length > 0 && (\r\n                <div className=\"text-xs text-white/50\">\r\n                  Related:{\" \"}\r\n                  {item.related\r\n                    .map(rid => (\r\n                      <a\r\n                        key={rid}\r\n                        href={`#faq/${rid}`}\r\n                        onClick={onRelatedClick(rid)}\r\n                        className=\"underline decoration-white/30 underline-offset-2 hover:text-white/70\"\r\n                      >\r\n                        {rid.replace(/-/g, \" \")}\r\n                      </a>\r\n                    ))\r\n                    .reduce(\r\n                      (acc: React.ReactNode[], curr, i) => (i ? [...acc, <span key={`sep-${i}`}> Â· </span>, curr] : [curr]),\r\n                      [] as React.ReactNode[]\r\n                    )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    </article>\r\n  );\r\n}\r\n\r\nfunction EmptyState({ onReset }: { onReset: () => void }) {\r\n  return (\r\n    <div className=\"rounded-2xl panel px-4 py-8 text-center text-white/70\">\r\n      <p className=\"text-sm\">\r\n        No results. Try <span className=\"text-white\">â€œinvoiceâ€</span>, <span className=\"text-white\">â€œvisaâ€</span>, or{\" \"}\r\n        <span className=\"text-white\">â€œTrip Builderâ€</span>.\r\n      </p>\r\n      <button\r\n        type=\"button\"\r\n        className=\"mt-4 rounded-lg border border-white/15 bg-white/10 px-3 py-1.5 text-sm hover:bg-white/15\"\r\n        onClick={onReset}\r\n      >\r\n        Clear filters\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4168, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdulraheem/Developer/Next/travelclone/lib/trip-builder/guardrails.ts"],"sourcesContent":["// lib/trip-builder/guardrails.ts\nexport const DESTINATIONS = [\n  \"Dubai, UAE\",\n  \"Singapore, Singapore\",\n  \"Bangkok, Thailand\",\n  \"Bali, Indonesia\",\n  \"Istanbul, Turkey\",\n  \"Maldives, Maldives\",\n  \"Phuket, Thailand\",\n  \"Doha, Qatar\",\n] as const;\n\nexport const ORIGIN_CITIES = [\n  \"Mumbai, India\",\n  \"Delhi, India\",\n  \"Bangalore, India\",\n  \"Chennai, India\",\n  \"Kolkata, India\",\n  \"Hyderabad, India\",\n  \"Pune, India\",\n  \"Ahmedabad, India\",\n  \"New York, USA\",\n  \"London, UK\",\n  \"Dubai, UAE\",\n  \"Singapore, Singapore\",\n] as const;\n\nexport const NATIONALITIES = [\n  \"Indian\",\n  \"NRI\",\n  \"South Asian\",\n  \"American\",\n  \"Other\",\n] as const;\n\nexport const AIRLINES = [\n  \"Any\",\n  \"IndiGo\",\n  \"Air India\",\n  \"Emirates\",\n  \"Qatar Airways\",\n  \"Vistara\",\n] as const;\n\nexport const ROOMS = [\n  \"King Bed\",\n  \"Twin Beds\",\n  \"Connecting Rooms\",\n  \"High Floor\",\n  \"Non-Smoking\",\n  \"Accessible\",\n  \"Sea View\",\n] as const;\n\nexport const ACTIVITIES = [\n  \"Desert Safari\",\n  \"Burj Al Arab Tour\",\n  \"City Tour\",\n  \"Museum\",\n  \"Theme Park\",\n] as const;\n\nexport const HOTEL_PREFERENCES = [\"3 Star\", \"4 Star\", \"5 Star\"] as const;\n\nexport const FLIGHT_CLASSES = [\"Economy\", \"Business\", \"First\"] as const;\n\nexport const VISA_STATUS = [\"Available\", \"N/A\"] as const;\n\n// Tiny fact blurbs used for small talk.\n// Keep these brand-safe and non-claimy.\nconst FACTS: Record<string, string> = {\n  \"Dubai, UAE\": \"Desert meets skyscrapers; family-friendly and easy to plan.\",\n  \"Singapore, Singapore\":\n    \"Compact, spotless, wildly efficient. Food courts are elite.\",\n  \"Bangkok, Thailand\": \"Temples by day, markets by night. Great value.\",\n  \"Bali, Indonesia\": \"Beach + rice terraces. Photogenic to a rude degree.\",\n  \"Istanbul, Turkey\": \"Two continents, one city. History stacked on history.\",\n  \"Maldives, Maldives\": \"Clear lagoons, overwater villas, escape energy.\",\n  \"Phuket, Thailand\":\n    \"Tropical paradise with stunning beaches and vibrant nightlife.\",\n  \"Doha, Qatar\":\n    \"Modern architecture meets traditional culture in the heart of the Middle East.\",\n};\n\nexport function niceFact(dest?: string) {\n  return dest && FACTS[dest] ? FACTS[dest] : \"Solid choice. Easy planning.\";\n}\n\nexport function whereIs(dest?: string) {\n  return dest\n    ? `${dest} is a popular, well-connected destination with plenty of family-friendly options.`\n    : \"A well-connected destination with straightforward planning.\";\n}\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;;;;;;;;;;;;;;;;;;;;AAC1B,MAAM,eAAe;IAC1B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,WAAW;IACtB;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,QAAQ;IACnB;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,aAAa;IACxB;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,oBAAoB;IAAC;IAAU;IAAU;CAAS;AAExD,MAAM,iBAAiB;IAAC;IAAW;IAAY;CAAQ;AAEvD,MAAM,cAAc;IAAC;IAAa;CAAM;AAE/C,wCAAwC;AACxC,wCAAwC;AACxC,MAAM,QAAgC;IACpC,cAAc;IACd,wBACE;IACF,qBAAqB;IACrB,mBAAmB;IACnB,oBAAoB;IACpB,sBAAsB;IACtB,oBACE;IACF,eACE;AACJ;AAEO,SAAS,SAAS,IAAa;IACpC,OAAO,QAAQ,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG;AAC7C;AAEO,SAAS,QAAQ,IAAa;IACnC,OAAO,OACH,AAAC,GAAO,OAAL,MAAK,uFACR;AACN","debugId":null}},
    {"offset": {"line": 4287, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdulraheem/Developer/Next/travelclone/components/trip/TripBuilderLite.tsx"],"sourcesContent":["// components/trip/TripBuilderLite.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n// Pull the same curated choices you use in TripBuilderReceipt\r\nimport {\r\n  AIRLINES,\r\n  DESTINATIONS as DESTINATION_CHOICES,\r\n  NATIONALITIES,\r\n  ORIGIN_CITIES,\r\n  HOTEL_PREFERENCES,\r\n  FLIGHT_CLASSES,\r\n  VISA_STATUS,\r\n  DESTINATIONS, // used for label mapping\r\n} from \"@/lib/trip-builder/guardrails\";\r\n\r\n/* ---------------- Types ---------------- */\r\ntype Answers = {\r\n  from?: string;            // \"City, Country\"\r\n  destination?: string;     // \"City, Country\"\r\n  startDate?: string;       // ISO yyyy-mm-dd\r\n  endDate?: string;         // ISO yyyy-mm-dd\r\n  adults?: number;\r\n  children?: number;\r\n\r\n  passengerName?: string;\r\n  phoneCountryCode?: string; // \"+91\"\r\n  phoneNumber?: string;\r\n  email?: string;\r\n  nationality?: string;\r\n  airlinePref?: string;\r\n  hotelPref?: string;\r\n  flightClass?: string;\r\n  visaStatus?: string;\r\n\r\n  seededDestination?: string;\r\n  seedPromptShown?: boolean;\r\n};\r\n\r\ntype StepId =\r\n  | \"fromLocation\"\r\n  | \"destinationSeed\"\r\n  | \"destinationSelect\"\r\n  | \"dates\"\r\n  | \"travellers\"\r\n  | \"passengerName\"\r\n  | \"phoneNumber\"\r\n  | \"email\"\r\n  | \"nationality\"\r\n  | \"airline\"\r\n  | \"hotel\"\r\n  | \"flightClass\"\r\n  | \"visa\"\r\n  | \"summary\";\r\n\r\n/* Keep flow identical to TripBuilderReceipt */\r\nconst STEPS: StepId[] = [\r\n  \"fromLocation\",\r\n  \"destinationSeed\",\r\n  \"destinationSelect\",\r\n  \"dates\",\r\n  \"travellers\",\r\n  \"passengerName\",\r\n  \"phoneNumber\",\r\n  \"email\",\r\n  \"nationality\",\r\n  \"airline\",\r\n  \"hotel\",\r\n  \"flightClass\",\r\n  \"visa\",\r\n  \"summary\",\r\n];\r\n\r\n/* ---------------- Helpers ---------------- */\r\nfunction fmtDate(iso?: string) {\r\n  if (!iso) return \"\";\r\n  try {\r\n    const d = new Date(iso + \"T00:00:00\");\r\n    return d.toLocaleDateString(undefined, {\r\n      day: \"2-digit\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n    });\r\n  } catch {\r\n    return iso;\r\n  }\r\n}\r\n\r\n// map labels like \"Dubai, UAE\" or \"Dubai\" back to canonical label\r\nconst DESTINATION_LABEL_TO_ID = DESTINATIONS.reduce<Record<string, string>>(\r\n  (acc, dest) => {\r\n    acc[dest.toLowerCase()] = dest;\r\n    const city = dest.split(\",\")[0].toLowerCase();\r\n    acc[city] = dest;\r\n    return acc;\r\n  },\r\n  {}\r\n);\r\n\r\nfunction destinationSlugFromLabel(label?: string) {\r\n  if (!label) return undefined;\r\n  const key = label.toLowerCase().trim();\r\n  if (DESTINATION_LABEL_TO_ID[key]) return DESTINATION_LABEL_TO_ID[key];\r\n  const parts = label.split(\",\").map((p) => p.trim());\r\n  if (parts.length >= 2) {\r\n    const recomposedKey = `${parts[0].toLowerCase()}, ${parts[1].toLowerCase()}`;\r\n    return DESTINATION_LABEL_TO_ID[recomposedKey];\r\n  }\r\n  return undefined;\r\n}\r\n\r\n/* Quick date presets for true one-click on desktop too */\r\nfunction addDays(base: Date, days: number) {\r\n  const d = new Date(base);\r\n  d.setDate(d.getDate() + days);\r\n  return d;\r\n}\r\nfunction iso(d: Date) {\r\n  return d.toISOString().slice(0, 10);\r\n}\r\nfunction nextSaturday(from = new Date()) {\r\n  const d = new Date(from);\r\n  const day = d.getDay(); // 0 Sun .. 6 Sat\r\n  const delta = (6 - day + 7) % 7 || 7;\r\n  return addDays(d, delta);\r\n}\r\nfunction weekendEscape(): [string, string] {\r\n  const start = nextSaturday();\r\n  const end = addDays(start, 1); // Sat-Sun\r\n  return [iso(start), iso(end)];\r\n}\r\nfunction nextNights(n: number): [string, string] {\r\n  const start = addDays(new Date(), 7); // one week from today, civilized\r\n  const end = addDays(start, n);\r\n  return [iso(start), iso(end)];\r\n}\r\n\r\n/* ---------------- Component ---------------- */\r\nexport default function TripBuilderLite() {\r\n  const router = useRouter();\r\n\r\n  const [idx, setIdx] = useState(0);\r\n  const [answers, setAnswers] = useState<Answers>({\r\n    adults: 1,\r\n    children: 0,\r\n    // seededDestination: \"Dubai, UAE\",\r\n    seedPromptShown: false,\r\n  });\r\n\r\n  // Determine current step, but skip destinationSeed if nothing is seeded\r\n  const steps = useMemo(() => {\r\n    if (!answers.seededDestination) {\r\n      return STEPS.filter((s) => s !== \"destinationSeed\");\r\n    }\r\n    return STEPS;\r\n  }, [answers.seededDestination]);\r\n\r\n  const current = steps[idx];\r\n\r\n  // submission state\r\n  const [submitting, setSubmitting] = useState<\"idle\" | \"saving\" | \"saved\" | \"error\">(\"idle\");\r\n\r\n  const hasAll = useMemo(() => {\r\n    return Boolean(\r\n      answers.from &&\r\n        (answers.destination || answers.seededDestination) &&\r\n        answers.nationality &&\r\n        answers.startDate &&\r\n        answers.endDate &&\r\n        answers.passengerName?.trim() &&\r\n        (answers.phoneCountryCode || \"\").trim() &&\r\n        (answers.phoneNumber || \"\").trim() &&\r\n        (answers.email || \"\").trim() &&\r\n        answers.airlinePref &&\r\n        answers.hotelPref &&\r\n        answers.flightClass &&\r\n        answers.visaStatus\r\n    );\r\n  }, [answers]);\r\n\r\n  // keyboard: arrows for nav, Enter to proceed/submit\r\n  useEffect(() => {\r\n    const onKey = (e: KeyboardEvent) => {\r\n      if (e.key === \"ArrowRight\") {\r\n        e.preventDefault();\r\n        goNext();\r\n      } else if (e.key === \"ArrowLeft\") {\r\n        e.preventDefault();\r\n        goPrev();\r\n      } else if (e.key === \"Enter\") {\r\n        if (current === \"summary\") {\r\n          if (hasAll) {\r\n            e.preventDefault();\r\n            submitRequest();\r\n          }\r\n        } else if (canProceed()) {\r\n          e.preventDefault();\r\n          goNext();\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [current, idx, answers, hasAll, submitting]);\r\n\r\n  function canProceed(): boolean {\r\n    switch (current) {\r\n      case \"fromLocation\":\r\n        return !!answers.from;\r\n      case \"destinationSeed\":\r\n        return true; // user will click Keep/Change buttons\r\n      case \"destinationSelect\":\r\n        return !!answers.destination;\r\n      case \"dates\":\r\n        return Boolean(\r\n          answers.startDate &&\r\n            answers.endDate &&\r\n            answers.startDate <= answers.endDate\r\n        );\r\n      case \"travellers\":\r\n        return (answers.adults ?? 0) >= 1 && (answers.children ?? 0) >= 0;\r\n      case \"passengerName\":\r\n        return Boolean(answers.passengerName?.trim());\r\n      case \"phoneNumber\":\r\n        return Boolean(\r\n          (answers.phoneCountryCode || \"\").trim().length >= 1 &&\r\n            (answers.phoneNumber || \"\").replace(/\\s+/g, \"\").length >= 6\r\n        );\r\n      case \"email\":\r\n        return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(answers.email || \"\");\r\n      case \"nationality\":\r\n        return !!answers.nationality;\r\n      case \"airline\":\r\n        return !!answers.airlinePref;\r\n      case \"hotel\":\r\n        return !!answers.hotelPref;\r\n      case \"flightClass\":\r\n        return !!answers.flightClass;\r\n      case \"visa\":\r\n        return !!answers.visaStatus;\r\n      case \"summary\":\r\n        return true;\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  function goNext() {\r\n    if (!canProceed()) return;\r\n\r\n    // special routing to mirror receipt flow nuances\r\n    if (current === \"fromLocation\") {\r\n      const next = answers.seededDestination ? \"destinationSeed\" : \"destinationSelect\";\r\n      setIdx(steps.indexOf(next));\r\n      return;\r\n    }\r\n    if (current === \"destinationSeed\") {\r\n      // user must click Keep/Change buttons; Next just guards\r\n      return;\r\n    }\r\n    setIdx((i) => Math.min(i + 1, steps.length - 1));\r\n  }\r\n\r\n  function goPrev() {\r\n    setIdx((i) => Math.max(i - 1, 0));\r\n  }\r\n\r\n  // Focus management - focus the question when the section is in view\r\n  const questionRef = useRef<HTMLDivElement | null>(null);\r\n  useEffect(() => {\r\n    const tripBuilderSection = document.getElementById(\"trip-builder\");\r\n    if (tripBuilderSection) {\r\n      const rect = tripBuilderSection.getBoundingClientRect();\r\n      const isInView = rect.top >= 0 && rect.top < window.innerHeight;\r\n      if (isInView && questionRef.current) {\r\n        questionRef.current.focus({ preventScroll: true });\r\n      }\r\n    }\r\n  }, [current]);\r\n\r\n  // Small helpers\r\n  function setAndAdvance<K extends keyof Answers>(key: K, value: Answers[K]) {\r\n    setAnswers((a) => ({ ...a, [key]: value }));\r\n    // one-tap auto-advance for choice steps\r\n    const shouldAutoAdvance = [\r\n      \"fromLocation\",\r\n      \"destinationSelect\",\r\n      \"nationality\",\r\n      \"airline\",\r\n      \"hotel\",\r\n      \"flightClass\",\r\n      \"visa\",\r\n    ].includes(current);\r\n    if (shouldAutoAdvance) {\r\n      setTimeout(() => goNext(), 160);\r\n    }\r\n  }\r\n\r\n  // \"Keep seeded destination?\" actions\r\n  function keepSeeded() {\r\n    if (!answers.seededDestination) return;\r\n    setAnswers((a) => ({\r\n      ...a,\r\n      destination: a.seededDestination,\r\n      seededDestination: undefined,\r\n      seedPromptShown: true,\r\n    }));\r\n    const to = steps.indexOf(\"dates\");\r\n    if (to >= 0) {\r\n      setTimeout(() => setIdx(to), 120);\r\n    }\r\n  }\r\n  function changeDestination() {\r\n    setAnswers((a) => ({ ...a, seededDestination: undefined, seedPromptShown: true }));\r\n    const to = steps.indexOf(\"destinationSelect\");\r\n    if (to >= 0) {\r\n      setTimeout(() => setIdx(to), 120);\r\n    }\r\n  }\r\n\r\n  async function submitRequest() {\r\n    if (!hasAll || submitting === \"saving\") return;\r\n\r\n    setSubmitting(\"saving\");\r\n\r\n    const payload = {\r\n      origin: answers.from!,\r\n      destination: answers.destination || answers.seededDestination || \"\",\r\n      nationality: answers.nationality!,\r\n      startDate: answers.startDate!,\r\n      endDate: answers.endDate!,\r\n      adults: answers.adults ?? 1,\r\n      kids: answers.children ?? 0,\r\n      airlinePreference: answers.airlinePref!,\r\n      hotelPreference: answers.hotelPref!,\r\n      flightClass: answers.flightClass!,\r\n      visaStatus: answers.visaStatus!,\r\n      passengerName: answers.passengerName!,\r\n      email: answers.email!,\r\n      phoneCountryCode: answers.phoneCountryCode!,\r\n      phoneNumber: answers.phoneNumber!,\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(\"/api/trip-requests\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\r\n      const json = await res.json().catch(() => null);\r\n      const createdId =\r\n        json && typeof json === \"object\" ? (json as { id?: string }).id ?? null : null;\r\n\r\n      setSubmitting(\"saved\");\r\n\r\n      const params = new URLSearchParams();\r\n      const destId = destinationSlugFromLabel(payload.destination);\r\n      if (destId) params.set(\"destinationId\", destId);\r\n\r\n      if (createdId) {\r\n        router.push(`/trip/receipt/${createdId}${params.size ? `?${params}` : \"\"}`);\r\n      } else {\r\n        router.push(`/trip/receipt${params.size ? `?${params}` : \"\"}`);\r\n      }\r\n    } catch {\r\n      setSubmitting(\"error\");\r\n    }\r\n  }\r\n\r\n  /* -------------- UI labels -------------- */\r\n  const stepTitle = {\r\n    fromLocation: \"Where are you traveling from?\",\r\n    destinationSeed: \"Keep suggested destination?\",\r\n    destinationSelect: \"Pick a destination\",\r\n    dates: \"When do you plan to travel?\",\r\n    travellers: \"How many travelers?\",\r\n    passengerName: \"Passenger name\",\r\n    phoneNumber: \"Best phone number\",\r\n    email: \"Email for your itinerary\",\r\n    nationality: \"Your nationality\",\r\n    airline: \"Airline preference\",\r\n    hotel: \"Hotel preference\",\r\n    flightClass: \"Flight class\",\r\n    visa: \"Visa status\",\r\n    summary: \"Review and submit\",\r\n  } as const;\r\n\r\n  return (\r\n    <section\r\n      id=\"trip-builder\"\r\n      aria-labelledby=\"tripbuilder-heading\"\r\n      className=\"relative isolate w-full bg-zinc-950 text-zinc-100\"\r\n    >\r\n      {/* Background vignette + subtle linear glow */}\r\n      <div\r\n        aria-hidden\r\n        className=\"pointer-events-none absolute inset-0 [background:radial-gradient(1200px_500px_at_20%_-10%,rgba(255,255,255,0.08)_0%,transparent_60%)]\"\r\n      />\r\n      <div className=\"absolute inset-x-0 top-1/2 -z-10 h-28 overflow-hidden pointer-events-none\">\r\n        <div className=\"glowbar mx-auto h-28 w-[135%]\" />\r\n      </div>\r\n\r\n      {/* Sticky Header */}\r\n      <header className=\"sticky top-0 z-10 border-b border-white/10 bg-zinc-950/80 backdrop-blur\">\r\n        <div className=\"mx-auto flex max-w-4xl items-center gap-4 px-4 py-3\">\r\n          <h2 id=\"tripbuilder-heading\" className=\"text-lg font-semibold text-white sm:text-xl\">\r\n            Trip Builder Lite\r\n          </h2>\r\n          <div className=\"ml-auto flex items-center gap-3\">\r\n            <span className=\"text-xs text-zinc-400\">\r\n              Step {idx + 1} of {steps.length}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <ProgressBar total={steps.length} index={idx} />\r\n      </header>\r\n\r\n      {/* Main Canvas */}\r\n      <div className=\"mx-auto max-w-4xl px-4 pb-24 pt-4 sm:pt-6 md:pb-28\">\r\n        <div className=\"relative rounded-2xl border border-white/12 bg-zinc-950/60 p-0.5 shadow-[0_20px_60px_rgba(0,0,0,0.35)]\">\r\n          <div className=\"relative rounded-2xl bg-zinc-950/70\">\r\n            <div\r\n              aria-hidden\r\n              className=\"pointer-events-none absolute inset-0 rounded-2xl ring-1 ring-white/10 [box-shadow:0_0_0_1px_rgba(255,255,255,0.05),0_0_40px_2px_rgba(180,180,255,0.08)_inset]\"\r\n            />\r\n\r\n            {/* Question card */}\r\n            <div className=\"px-4 py-5 sm:px-6 sm:py-7\">\r\n              <div className=\"mx-auto grid w-full max-w-2xl gap-5\">\r\n                <div className=\"card\">\r\n                  <header className=\"mb-3\">\r\n                    <h3 className=\"text-2xl font-semibold text-white sm:text-3xl\">\r\n                      {stepTitle[current]}\r\n                    </h3>\r\n                    <p className=\"mt-1 text-sm text-zinc-400\">\r\n                      {current === \"fromLocation\" && \"Major cities with airports\"}\r\n                      {current === \"destinationSeed\" && \"You can change it if needed\"}\r\n                      {current === \"destinationSelect\" && \"Weâ€™ll refine specifics after you submit\"}\r\n                      {current === \"dates\" && \"Select your dates or pick a preset\"}\r\n                      {current === \"travellers\" && \"Pick a preset or edit counts\"}\r\n                      {current === \"passengerName\" && \"Full legal name as on passport\"}\r\n                      {current === \"phoneNumber\" && \"Include your country code\"}\r\n                      {current === \"email\" && \"We send your draft itinerary there\"}\r\n                      {current === \"nationality\" && \"Used for visa rules\"}\r\n                      {current === \"airline\" && \"Optional, helps us shortlist\"}\r\n                      {current === \"hotel\" && \"Preferred star level or brand type\"}\r\n                      {current === \"flightClass\" && \"Weâ€™ll price across cabins\"}\r\n                      {current === \"visa\" && \"Tell us where you stand right now\"}\r\n                      {current === \"summary\" && \"Double-check before submitting\"}\r\n                    </p>\r\n                  </header>\r\n\r\n                  {/* Content boxes per step */}\r\n                  <div className=\"grid w-full gap-5\">\r\n                    {current === \"fromLocation\" && (\r\n                      <ChoiceGridBig\r\n                        options={ORIGIN_CITIES}\r\n                        value={answers.from}\r\n                        onChange={(v) => setAndAdvance(\"from\", v)}\r\n                      />\r\n                    )}\r\n\r\n                    {current === \"destinationSeed\" && answers.seededDestination && (\r\n                      <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\r\n                        <BigButton onClick={keepSeeded} variant=\"primary\" ariaLabel=\"Keep destination\">\r\n                          Keep {answers.seededDestination}\r\n                        </BigButton>\r\n                        <BigButton onClick={changeDestination} variant=\"ghost\" ariaLabel=\"Change destination\">\r\n                          Change destination\r\n                        </BigButton>\r\n                      </div>\r\n                    )}\r\n\r\n                    {current === \"destinationSelect\" && (\r\n                      <ChoiceGridBig\r\n                        options={DESTINATION_CHOICES}\r\n                        value={answers.destination}\r\n                        onChange={(v) => setAndAdvance(\"destination\", v)}\r\n                      />\r\n                    )}\r\n\r\n                    {current === \"dates\" && (\r\n                      <div className=\"grid gap-5\">\r\n                        {/* One-click presets as BOXES */}\r\n                        <div className=\"grid grid-cols-1 gap-2 sm:grid-cols-3\">\r\n                          <PresetBox\r\n                            label=\"Weekend escape\"\r\n                            hint=\"Sat â†’ Sun\"\r\n                            onClick={() => {\r\n                              const [s, e] = weekendEscape();\r\n                              setAnswers((a) => ({ ...a, startDate: s, endDate: e }));\r\n                              setTimeout(() => goNext(), 140);\r\n                            }}\r\n                          />\r\n                          <PresetBox\r\n                            label=\"Next 5 nights\"\r\n                            hint=\"1 week from today\"\r\n                            onClick={() => {\r\n                              const [s, e] = nextNights(5);\r\n                              setAnswers((a) => ({ ...a, startDate: s, endDate: e }));\r\n                              setTimeout(() => goNext(), 140);\r\n                            }}\r\n                          />\r\n                          <PresetBox\r\n                            label=\"Next 7 nights\"\r\n                            hint=\"1 week from today\"\r\n                            onClick={() => {\r\n                              const [s, e] = nextNights(7);\r\n                              setAnswers((a) => ({ ...a, startDate: s, endDate: e }));\r\n                              setTimeout(() => goNext(), 140);\r\n                            }}\r\n                          />\r\n                        </div>\r\n\r\n                        {/* Manual pick, still boxed */}\r\n                        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n                          <Labeled field=\"start-date\" label=\"Start date\">\r\n                            <input\r\n                              id=\"start-date\"\r\n                              type=\"date\"\r\n                              value={answers.startDate ?? \"\"}\r\n                              max={answers.endDate || undefined}\r\n                              onChange={(e) => {\r\n                                const newStartDate = e.target.value;\r\n                                setAnswers((a) => ({ ...a, startDate: newStartDate }));\r\n                                const endDate = answers.endDate;\r\n                                if (newStartDate && endDate && newStartDate <= endDate) {\r\n                                  setTimeout(() => goNext(), 200);\r\n                                }\r\n                              }}\r\n                              className=\"input input-lg\"\r\n                            />\r\n                          </Labeled>\r\n                          <Labeled field=\"end-date\" label=\"End date\">\r\n                            <input\r\n                              id=\"end-date\"\r\n                              type=\"date\"\r\n                              value={answers.endDate ?? \"\"}\r\n                              min={answers.startDate || undefined}\r\n                              onChange={(e) => {\r\n                                const newEndDate = e.target.value;\r\n                                setAnswers((a) => ({ ...a, endDate: newEndDate }));\r\n                                const startDate = answers.startDate;\r\n                                if (startDate && newEndDate && startDate <= newEndDate) {\r\n                                  setTimeout(() => goNext(), 200);\r\n                                }\r\n                              }}\r\n                              className=\"input input-lg\"\r\n                            />\r\n                          </Labeled>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {current === \"travellers\" && (\r\n                      <div className=\"grid gap-5\">\r\n                        {/* One-click presets as BOXES */}\r\n                        <div className=\"grid grid-cols-1 gap-2 sm:grid-cols-3\">\r\n                          <PresetBox\r\n                            label=\"Solo\"\r\n                            hint=\"1 adult\"\r\n                            onClick={() => {\r\n                              setAnswers((a) => ({ ...a, adults: 1, children: 0 }));\r\n                              setTimeout(() => goNext(), 140);\r\n                            }}\r\n                          />\r\n                          <PresetBox\r\n                            label=\"Couple\"\r\n                            hint=\"2 adults\"\r\n                            onClick={() => {\r\n                              setAnswers((a) => ({ ...a, adults: 2, children: 0 }));\r\n                              setTimeout(() => goNext(), 140);\r\n                            }}\r\n                          />\r\n                          <PresetBox\r\n                            label=\"Family\"\r\n                            hint=\"2 adults, 2 kids\"\r\n                            onClick={() => {\r\n                              setAnswers((a) => ({ ...a, adults: 2, children: 2 }));\r\n                              setTimeout(() => goNext(), 140);\r\n                            }}\r\n                          />\r\n                        </div>\r\n\r\n                        {/* Manual controls, still boxed */}\r\n                        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n                          <Labeled field=\"adults\" label=\"Adults\">\r\n                            <NumberField\r\n                              id=\"adults\"\r\n                              min={1}\r\n                              value={answers.adults ?? 1}\r\n                              onChange={(n) => {\r\n                                setAnswers((a) => ({ ...a, adults: n }));\r\n                                if (n >= 1 && (answers.children ?? 0) >= 0) {\r\n                                  setTimeout(() => goNext(), 220);\r\n                                }\r\n                              }}\r\n                            />\r\n                          </Labeled>\r\n                          <Labeled field=\"children\" label=\"Children\">\r\n                            <NumberField\r\n                              id=\"children\"\r\n                              min={0}\r\n                              value={answers.children ?? 0}\r\n                              onChange={(n) => {\r\n                                setAnswers((a) => ({ ...a, children: n }));\r\n                                if ((answers.adults ?? 1) >= 1 && n >= 0) {\r\n                                  setTimeout(() => goNext(), 220);\r\n                                }\r\n                              }}\r\n                            />\r\n                          </Labeled>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {current === \"passengerName\" && (\r\n                      <Labeled field=\"pname\" label=\"Full name\">\r\n                        <input\r\n                          id=\"pname\"\r\n                          type=\"text\"\r\n                          inputMode=\"text\"\r\n                          placeholder=\"Type your name\"\r\n                          value={answers.passengerName ?? \"\"}\r\n                          onChange={(e) => {\r\n                            const newName = e.target.value;\r\n                            setAnswers((a) => ({ ...a, passengerName: newName }));\r\n                            if (newName.trim().length >= 2) {\r\n                              setTimeout(() => goNext(), 300);\r\n                            }\r\n                          }}\r\n                          className=\"input input-lg\"\r\n                        />\r\n                      </Labeled>\r\n                    )}\r\n\r\n                    {current === \"phoneNumber\" && (\r\n                      <div className=\"grid grid-cols-[120px_1fr] gap-3 sm:grid-cols-[140px_1fr]\">\r\n                        <Labeled field=\"pcode\" label=\"Country code\">\r\n                          <input\r\n                            id=\"pcode\"\r\n                            type=\"tel\"\r\n                            inputMode=\"tel\"\r\n                            placeholder=\"+91\"\r\n                            value={answers.phoneCountryCode ?? \"\"}\r\n                            onChange={(e) => {\r\n                              const newCode = e.target.value;\r\n                              setAnswers((a) => ({ ...a, phoneCountryCode: newCode }));\r\n                              const phoneNumber = answers.phoneNumber ?? \"\";\r\n                              if (newCode.trim().length >= 1 && phoneNumber.replace(/\\s+/g, \"\").length >= 6) {\r\n                                setTimeout(() => goNext(), 260);\r\n                              }\r\n                            }}\r\n                            className=\"input input-lg\"\r\n                          />\r\n                        </Labeled>\r\n                        <Labeled field=\"pnum\" label=\"Number\">\r\n                          <input\r\n                            id=\"pnum\"\r\n                            type=\"tel\"\r\n                            inputMode=\"tel\"\r\n                            placeholder=\"98765 43210\"\r\n                            value={answers.phoneNumber ?? \"\"}\r\n                            onChange={(e) => {\r\n                              const newNumber = e.target.value;\r\n                              setAnswers((a) => ({ ...a, phoneNumber: newNumber }));\r\n                              const countryCode = answers.phoneCountryCode ?? \"\";\r\n                              if (countryCode.trim().length >= 1 && newNumber.replace(/\\s+/g, \"\").length >= 6) {\r\n                                setTimeout(() => goNext(), 260);\r\n                              }\r\n                            }}\r\n                            className=\"input input-lg\"\r\n                          />\r\n                        </Labeled>\r\n                      </div>\r\n                    )}\r\n\r\n                    {current === \"email\" && (\r\n                      <Labeled field=\"email\" label=\"Email\">\r\n                        <input\r\n                          id=\"email\"\r\n                          type=\"email\"\r\n                          inputMode=\"email\"\r\n                          placeholder=\"you@example.com\"\r\n                          value={answers.email ?? \"\"}\r\n                          onChange={(e) => {\r\n                            const newEmail = e.target.value;\r\n                            setAnswers((a) => ({ ...a, email: newEmail }));\r\n                            if (/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newEmail)) {\r\n                              setTimeout(() => goNext(), 260);\r\n                            }\r\n                          }}\r\n                          className=\"input input-lg\"\r\n                        />\r\n                      </Labeled>\r\n                    )}\r\n\r\n                    {current === \"nationality\" && (\r\n                      <ChoiceGridBig\r\n                        options={NATIONALITIES}\r\n                        value={answers.nationality}\r\n                        onChange={(v) => setAndAdvance(\"nationality\", v)}\r\n                      />\r\n                    )}\r\n\r\n                    {current === \"airline\" && (\r\n                      <ChoiceGridBig\r\n                        options={AIRLINES}\r\n                        value={answers.airlinePref}\r\n                        onChange={(v) => setAndAdvance(\"airlinePref\", v)}\r\n                      />\r\n                    )}\r\n\r\n                    {current === \"hotel\" && (\r\n                      <ChoiceGridBig\r\n                        options={[...HOTEL_PREFERENCES, \"7 Star\"]}\r\n                        value={answers.hotelPref}\r\n                        onChange={(v) => setAndAdvance(\"hotelPref\", v)}\r\n                      />\r\n                    )}\r\n\r\n                    {current === \"flightClass\" && (\r\n                      <ChoiceGridBig\r\n                        options={[...FLIGHT_CLASSES, \"Premium Economy\"]}\r\n                        value={answers.flightClass}\r\n                        onChange={(v) => setAndAdvance(\"flightClass\", v)}\r\n                      />\r\n                    )}\r\n\r\n                    {current === \"visa\" && (\r\n                      <ChoiceGridBig\r\n                        options={VISA_STATUS}\r\n                        value={answers.visaStatus}\r\n                        onChange={(v) => setAndAdvance(\"visaStatus\", v)}\r\n                      />\r\n                    )}\r\n\r\n                    {current === \"summary\" && (\r\n                      <div className=\"rounded-xl border border-white/12 bg-white/5 p-4\">\r\n                        <dl className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\r\n                          <Row term=\"From\" def={answers.from} />\r\n                          <Row term=\"To\" def={answers.destination || answers.seededDestination} />\r\n                          <Row term=\"Start\" def={fmtDate(answers.startDate)} />\r\n                          <Row term=\"End\" def={fmtDate(answers.endDate)} />\r\n                          <Row term=\"Adults\" def={String(answers.adults ?? 0)} />\r\n                          <Row term=\"Children\" def={String(answers.children ?? 0)} />\r\n                          <Row term=\"Name\" def={answers.passengerName} />\r\n                          <Row\r\n                            term=\"Phone\"\r\n                            def={`${answers.phoneCountryCode ?? \"\"} ${answers.phoneNumber ?? \"\"}`.trim()}\r\n                          />\r\n                          <Row term=\"Email\" def={answers.email} />\r\n                          <Row term=\"Nationality\" def={answers.nationality} />\r\n                          <Row term=\"Airline\" def={answers.airlinePref} />\r\n                          <Row term=\"Hotel\" def={answers.hotelPref} />\r\n                          <Row term=\"Class\" def={answers.flightClass} />\r\n                          <Row term=\"Visa\" def={answers.visaStatus} />\r\n                        </dl>\r\n                        <p className=\"mt-3 text-sm text-zinc-400\">\r\n                          {submitting === \"saving\" && \"Submittingâ€¦\"}\r\n                          {submitting === \"saved\" && \"Redirectingâ€¦\"}\r\n                          {submitting === \"error\" &&\r\n                            \"We couldnâ€™t submit your request. Refresh and try again.\"}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Sticky Bottom Dock */}\r\n              <div className=\"sticky bottom-0 z-10 mt-6\">\r\n                <div className=\"flex items-center justify-between gap-3 rounded-xl border border-white/10 bg-zinc-950/85 px-4 py-3 backdrop-blur sm:px-6\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={goPrev}\r\n                    disabled={idx === 0 || submitting === \"saving\"}\r\n                    className=\"btn-ghost disabled:opacity-40\"\r\n                  >\r\n                    â† Back\r\n                  </button>\r\n\r\n                  {current === \"summary\" ? (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={submitRequest}\r\n                      disabled={!hasAll || submitting === \"saving\"}\r\n                      className=\"btn-primary w-40 disabled:opacity-40\"\r\n                    >\r\n                      {submitting === \"saving\" ? \"Submittingâ€¦\" : \"Submit â†’\"}\r\n                    </button>\r\n                  ) : (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={goNext}\r\n                      disabled={!canProceed() || submitting === \"saving\"}\r\n                      className=\"btn-primary w-32 disabled:opacity-40\"\r\n                    >\r\n                      Next â†’\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* CSS helpers for boxed UI, bigger tiles, and one-click affordance */}\r\n      <style jsx>{`\r\n        .card {\r\n          border: 1px solid rgba(255, 255, 255, 0.10);\r\n          background: rgba(255, 255, 255, 0.04);\r\n          border-radius: 1rem;\r\n          padding: 1rem;\r\n          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);\r\n        }\r\n\r\n        .input {\r\n          width: 100%;\r\n          border-radius: 0.9rem;\r\n          border: 1px solid rgba(255, 255, 255, 0.12);\r\n          background: rgba(255, 255, 255, 0.06);\r\n          color: white;\r\n          padding: 0.65rem 0.9rem;\r\n          outline: none;\r\n          backdrop-filter: blur(6px);\r\n          transition: border-color 160ms ease, box-shadow 160ms ease, transform 120ms ease;\r\n        }\r\n        .input:focus {\r\n          border-color: rgba(255, 255, 255, 0.28);\r\n          box-shadow: 0 0 0 4px rgba(180, 180, 255, 0.12);\r\n        }\r\n        .input-lg {\r\n          padding: 0.9rem 1rem;\r\n          font-size: 1rem;\r\n        }\r\n\r\n        .btn-primary, .btn-ghost {\r\n          border-radius: 0.9rem;\r\n          border: 1px solid rgba(255, 255, 255, 0.14);\r\n          color: white;\r\n          padding: 0.7rem 1rem;\r\n          backdrop-filter: blur(6px);\r\n          transition: transform 80ms ease, background 160ms ease, border-color 160ms ease;\r\n          touch-action: manipulation;\r\n        }\r\n        .btn-primary {\r\n          background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.06));\r\n        }\r\n        .btn-ghost {\r\n          background: rgba(255, 255, 255, 0.06);\r\n        }\r\n        .btn-primary:active, .btn-ghost:active {\r\n          transform: scale(0.98);\r\n        }\r\n\r\n        .choice {\r\n          border-radius: 1rem;\r\n          border: 1px solid rgba(255, 255, 255, 0.12);\r\n          background: rgba(255, 255, 255, 0.06);\r\n          color: white;\r\n          padding: 1rem 1rem;\r\n          line-height: 1.2;\r\n          text-align: left;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          gap: 0.75rem;\r\n          transition: transform 80ms ease, background 160ms ease, border-color 160ms ease, box-shadow 160ms ease;\r\n          touch-action: manipulation;\r\n        }\r\n        .choice:hover { background: rgba(255, 255, 255, 0.10); }\r\n        .choice:active { transform: scale(0.98); }\r\n        .choice[data-active=\"true\"] {\r\n          border-color: rgba(255, 255, 255, 0.28);\r\n          background: rgba(255, 255, 255, 0.12);\r\n          box-shadow: 0 4px 24px rgba(140, 140, 255, 0.12) inset;\r\n        }\r\n\r\n        .pill {\r\n          display: inline-flex;\r\n          height: 0.9rem;\r\n          width: 0.9rem;\r\n          border-radius: 9999px;\r\n          background: rgba(255, 255, 255, 0.35);\r\n        }\r\n        .pill[data-active=\"true\"] { background: white; }\r\n      `}</style>\r\n    </section>\r\n  );\r\n}\r\n\r\n/* ---------------- Little building blocks ---------------- */\r\nfunction Labeled({\r\n  field,\r\n  label,\r\n  children,\r\n}: {\r\n  field: string;\r\n  label: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <label htmlFor={field} className=\"block rounded-xl border border-white/10 bg-white/5 p-3\">\r\n      <div className=\"mb-2 text-xs uppercase tracking-wide text-zinc-400\">{label}</div>\r\n      {children}\r\n    </label>\r\n  );\r\n}\r\n\r\nfunction BigButton({\r\n  children,\r\n  onClick,\r\n  variant = \"primary\",\r\n  ariaLabel,\r\n}: {\r\n  children: React.ReactNode;\r\n  onClick: () => void;\r\n  variant?: \"primary\" | \"ghost\";\r\n  ariaLabel?: string;\r\n}) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      aria-label={ariaLabel}\r\n      onClick={onClick}\r\n      className={variant === \"primary\" ? \"btn-primary w-full\" : \"btn-ghost w-full\"}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction ChoiceGridBig({\r\n  options,\r\n  value,\r\n  onChange,\r\n}: {\r\n  options: ReadonlyArray<string>;\r\n  value?: string;\r\n  onChange: (val: string) => void;\r\n}) {\r\n  return (\r\n    <div className=\"grid grid-cols-1 gap-2 sm:grid-cols-2\">\r\n      {options.map((opt) => {\r\n        const active = value === opt;\r\n        return (\r\n          <button\r\n            key={opt}\r\n            type=\"button\"\r\n            aria-pressed={active}\r\n            onClick={() => onChange(opt)}\r\n            className=\"choice\"\r\n            data-active={active ? \"true\" : \"false\"}\r\n          >\r\n            <span className=\"text-base\">{opt}</span>\r\n            <span className=\"pill\" data-active={active ? \"true\" : \"false\"} />\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PresetBox({\r\n  label,\r\n  hint,\r\n  onClick,\r\n}: {\r\n  label: string;\r\n  hint?: string;\r\n  onClick: () => void;\r\n}) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      className=\"choice\"\r\n      aria-label={label}\r\n    >\r\n      <div>\r\n        <div className=\"text-base text-white\">{label}</div>\r\n        {hint && <div className=\"text-xs text-zinc-400 mt-0.5\">{hint}</div>}\r\n      </div>\r\n      <span className=\"pill\" data-active=\"true\" />\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction NumberField({\r\n  id,\r\n  min = 0,\r\n  value,\r\n  onChange,\r\n}: {\r\n  id: string;\r\n  min?: number;\r\n  value: number;\r\n  onChange: (n: number) => void;\r\n}) {\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn-ghost px-3 py-2\"\r\n        onClick={() => onChange(Math.max(min, (value || 0) - 1))}\r\n        aria-label=\"Decrease\"\r\n      >\r\n        âˆ’\r\n      </button>\r\n      <input\r\n        id={id}\r\n        type=\"number\"\r\n        min={min}\r\n        value={value}\r\n        onChange={(e) => onChange(Number(e.target.value || 0))}\r\n        className=\"input input-lg text-center\"\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn-ghost px-3 py-2\"\r\n        onClick={() => onChange((value || 0) + 1)}\r\n        aria-label=\"Increase\"\r\n      >\r\n        +\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Row({ term, def }: { term: string; def?: string | null }) {\r\n  return (\r\n    <div className=\"rounded-lg border border-white/10 bg-white/5 p-3\">\r\n      <dt className=\"text-xs uppercase tracking-wide text-zinc-400\">{term}</dt>\r\n      <dd className=\"mt-1 text-sm text-white\">{def || \"â€”\"}</dd>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ProgressBar({ total, index }: { total: number; index: number }) {\r\n  const pct = Math.max(2, Math.min(100, Math.round(((index + 1) / total) * 100)));\r\n  return (\r\n    <div className=\"h-1.5 w-full bg-white/10\">\r\n      <div\r\n        className=\"h-full bg-white transition-[width] duration-300 ease-out\"\r\n        style={{ width: `${pct}%` }}\r\n        aria-hidden\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}